!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xdsmjs=e():t.xdsmjs=e()}(window,(function(){return n={},t.m=e=[function(t,e,n){"use strict";var r={UNKNOWN:"UNKNOWN",PENDING:"PENDING",RUNNING:"RUNNING",DONE:"DONE",FAILED:"FAILED"};function o(t,e,n,o,i){var a=e||t,s=n||"function",u=o||r.UNKNOWN;if(void 0===r[u])throw Error("Unknown status '".concat(u,"' for node ").concat(a,"(id=").concat(t,")"));this.id=t,this.name=a,this.isMulti=0<=s.search(/_multi$/),this.type=this.isMulti?s.substr(0,s.length-"_multi".length):s,this.status=u,this.subxdsm=i}function i(t,e,n,r,o,i){var a=this;if(this.id="link_".concat(t,"_").concat(e),"string"==typeof n)this.name=n,this.vars={},this.name.split(",").forEach((function(t,e){a.vars[e]=t.trim()}));else{this.vars=n;var s=[];for(var u in this.vars)Object.prototype.hasOwnProperty.call(this.vars,u)&&s.push(this.vars[u]);this.name=s.join(", ")}this.row=r,this.col=o,this.iotype=r<o?"in":"out",this.isMulti=i}function a(t,e){var n=this,r=void 0===e||e;this.nodes=[],r&&(this.nodes=[new o("_U_","User","driver")]),this.edges=[],this.chains=[];var i=a.number(t.workflow),s=i.toNum;this.nodesByStep=i.toNode,t.nodes.forEach((function(t){var e=s[t.id];n.nodes.push(new o(t.id,e?"".concat(e,":").concat(t.name):t.name,t.type,t.status,t.subxdsm))}),this),this.uid=this.nodes[0].id,t.edges&&t.edges.forEach((function(t){n.addEdge(t.from,t.to,t.vars?t.vars:t.name)}),this),t.workflow&&this._makeChaining(t.workflow)}o.prototype.isComposite=function(){return"mdo"===this.type||"sub-optimization"===this.type||"group"===this.type||"implicit-group"===this.type},o.prototype.getSubXdsmId=function(){if(this.isComposite()){var t=this.name.indexOf("_scn-");if(-1!==t)return console.log("Use of <name>_scn-<id> pattern in node.name to detect sub scenario 'scn-<id>' is deprecated. Use node.subxdsm property instead (i.e. node.subxdsm = <id>)"),this.name.substr(t+1);if(this.subxdsm)return this.subxdsm;console.log("".concat("Warning: Sub XDSM id not found. Bad type or name for node: ").concat(JSON.stringify(this)))}return null},i.prototype.addVar=function(t){if("string"==typeof t)""===this.name?this.name=t:this.name+=", ".concat(t),this.vars[this.vars.length]=t;else for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){this.vars[e]=t[e];var n=[];for(var r in this.vars)Object.prototype.hasOwnProperty.call(this.vars,r)&&n.push(this.vars[r]);this.name=n.join(", ")}},i.prototype.removeVar=function(t){var e=!1;for(var n in this.vars)n===t&&(this.vars.delete(n),e=!0);if(!e){var r={};for(var o in this.vars)this.vars[o]===t?e=!0:r[o]=this.vars[o];this.vars=r}if(e){var i=[];for(var a in this.vars)Object.prototype.hasOwnProperty.call(this.vars,a)&&i.push(this.vars[a]);this.name=i.join(", ")}},a.NODE_STATUS=r,a.prototype._makeChaining=function(t){var e=this;a.expand(t).forEach((function(t){if(t.length<2)throw new Error("Bad process chain (".concat(t.length,"elt)"));e.chains.push([]);var n=e.nodes.map((function(t){return t.id}));t.forEach((function(r,o){if(0!==o){var i=n.indexOf(t[o-1]);if(i<0)throw new Error("Process chain element (".concat(t[o-1],") not found"));var a=n.indexOf(t[o]);if(a<0)throw new Error("Process chain element (".concat(t[o],") not found"));i!==a&&e.chains[e.chains.length-1].push([i,a])}}),e)}),this)},a.prototype.idxOf=function(t){var e=this.nodes.map((function(t){return t.id})).indexOf(t);if(e<0)throw new Error("Graph.idxOf: ".concat(t," not found in ").concat(JSON.stringify(this.nodes)));return e},a.prototype.getNode=function(t){var e;return this.nodes.forEach((function(n){n.id===t&&(e=n)}),this),e},a.prototype.getNodeFromIndex=function(t){if(!(0<=t&&t<this.nodes.length))throw new Error("Index out of range : ".concat(t," not in [0, ").concat(this.nodes.length-1,"]"));return this.nodes[t]},a.prototype.addNode=function(t){this.nodes.push(new o(t.id,t.name,t.kind))},a.prototype.removeNode=function(t){var e=this,n=this.findEdgesOf(t);n.toRemove.forEach((function(t){var n=e.edges.indexOf(t);-1<n&&e.edges.splice(n,1)}),this),n.toShift.forEach((function(t){1<t.row&&--t.row,1<t.col&&--t.col}),this),this.nodes.splice(t,1)},a.prototype.moveLeft=function(t){if(1<t){var e=this.nodes[t-1];this.nodes[t-1]=this.nodes[t],this.nodes[t]=e}},a.prototype.moveRight=function(t){if(t<this.nodes.length-1){var e=this.nodes[t+1];this.nodes[t+1]=this.nodes[t],this.nodes[t]=e}},a.prototype.addEdge=function(t,e,n){var r=this.idxOf(t),o=this.idxOf(e),a=this.nodes[r].isMulti||this.nodes[o].isMulti;this.edges.push(new i(t,e,n,r,o,a))},a.prototype.removeEdge=function(t,e){var n=this.findEdge(t,e);this.edges.splice(n.index,1)},a.prototype.addEdgeVar=function(t,e,n){var r=this.findEdge(t,e).element;r?(console.log(n),r.addVar(n)):this.addEdge(t,e,n)},a.prototype.removeEdgeVar=function(t,e,n){var r=this.findEdge(t,e),o=r.element,i=r.index;o&&o.removeVar(n),""===o.name&&this.edges.splice(i,1)},a.prototype.findEdgesOf=function(t){var e=[],n=[];return this.edges.forEach((function(r){r.row===t||r.col===t?e.push(r):(r.row>t||r.col>t)&&n.push(r)}),this),{toRemove:e,toShift:n}},a.prototype.findEdge=function(t,e){var n,r=-1,o=this.idxOf(t),i=this.idxOf(e);return this.edges.some((function(t,e){if(t.row!==o||t.col!==i)return!1;if(n)throw Error("edge have be uniq between two nodes, but got: ".concat(JSON.stringify(n)," and ").concat(JSON.stringify(t)));return n=t,r=e,!0}),this),{element:n,index:r}},a._isPatchNeeded=function(t){for(var e=t.map((function(t){return t[t.length-1]})),n=e[0],r=0;r<e.length;r+=1)if(e[r]!==n)return!0;return!1},a._patchParallel=function(t){var e=this,n=[];t.forEach((function(t){t instanceof Array?n.push(t):a._isPatchNeeded(n)&&n.forEach((function(e){e.push(t)}),e)}),this)},a.expand=function(t){var e=function t(e){var n,r=[];return e.forEach((function(e){if(e instanceof Array){if(Object.prototype.hasOwnProperty.call(e[0],"parallel")){if(!n)throw new Error("Bad workflow structure : cannot parallel loop without previous starting point.");r=r.slice(0,r.length-1).concat(e[0].parallel.map((function(e){return[n].concat(t([e]),n)})))}else r=n?r.concat(t(e),n):r.concat(t(e));n=r[r.length-1]}else if(Object.prototype.hasOwnProperty.call(e,"parallel"))r=n?r.slice(0,r.length-1).concat(e.parallel.map((function(e){return[n].concat(t([e]))}))):r.concat(e.parallel.map((function(e){return t([e])}))),n=void 0;else{for(var o=r.length-1,i=!1;0<=o&&r[o]instanceof Array;)r[o]=r[o].concat(e),--o,i=!0;i||r.push(e),n=e}})),r}(t),n=[],r=[];return a._patchParallel(e),e.forEach((function(t){if(t instanceof Array)0<r.length&&(r.push(t[0]),n.push(r),r=[]),n.push(t);else{if(0<n.length&&0===r.length){var e=n[n.length-1],o=e[e.length-1];r.push(o)}r.push(t)}}),this),0<r.length&&n.push(r),n},a.number=function(t,e){var n=void 0===e?0:e,r={},o=[];function i(t,e){t in o?o[t].push(e):o[t]=[e]}function a(t,e,o){void 0===o?(n=String(e),i(e,t)):(n="".concat(o,"-").concat(e),i(o,t)),t in r?r[t]+=",".concat(n):r[t]=n}return function t(e,n){var r=0;if(e instanceof Array)if(0===e.length)r=n;else if(1===e.length)r=t(e[0],n);else{var o=e[0],i=e.slice(1),s=t(o,n);if(i[0]instanceof Array){var u=t(i[0],s);a(o,s,u),s=u+1,i.shift()}r=t(i,s)}else if(e instanceof Object&&"parallel"in e){var c=e.parallel.map((function(e){return t(e,n)}));r=Math.max.apply(null,c)}else a(e,n),r=n+1;return r}(t,n),{toNum:r,toNode:o}},e.a=a},,function(t,e,n){"use strict";function r(){}r.strParse=function(t,e){if(""===t)return[{base:"",sub:void 0,sup:void 0}];var n=t.split(",");if(!1===e)return n.map((function(t){return{base:t,sub:void 0,sup:void 0}}));var r=/_/g,o=/([0-9-]+:)?([&#;A-Za-z0-9-.]+)(_[&#;A-Za-z0-9-._]+)?(\^.+)?/;return n.map((function(t){var e,n,i;if(1<(t.match(r)||[]).length){var a=t.match(/(.+)\^(.+)/);return a?{base:a[1],sub:void 0,sup:a[2]}:{base:t,sub:void 0,sup:void 0}}var s=t.match(o);if(!s)throw new Error("Labelizer.strParse: Can not parse '".concat(t,"'"));return e=(s[1]?s[1]:"")+s[2],s[3]&&(n=s[3].substring(1)),s[4]&&(i=s[4].substring(1)),{base:e,sub:n,sup:i}}),this)},r._createVarListLabel=function(t,e,n,o,i,a){r.strParse(e,i).every((function(e,r,i){var s=0,u=0;return o<1||r<5&&n.nodes()[0].getBBox().width<100?(n.append("tspan").html((function(){return a?"<a class='subxdsm-link' href=\"#".concat(a,'">').concat(e.base,"</a>"):e.base})),e.sub&&(s=10,n.append("tspan").attr("class","sub").attr("dy",s).html(e.sub)),e.sup&&(u=-10,n.append("tspan").attr("class","sup").attr("dx",-5).attr("dy",-s+u).html(e.sup),s=0),r<i.length-1&&n.append("tspan").attr("dy",-s-u).html(", "),!0):(n.append("tspan").attr("dy",-s-u).html("..."),t.classed("ellipsized",!0),!1)}),this)},r._createLinkNbLabel=function(t,e,n){var r=e.split(","),o="".concat(r.length," var");1<r.length&&(o+="s"),n.append("tspan").html(o),t.classed("ellipsized",!0)},r.labelize=function(){var t=0,e=!0,n=!1,o="node",i=!1;function a(a){a.each((function(s){var u=a.append("text");n&&"node"!==o?r._createLinkNbLabel(a,s.name,u):r._createVarListLabel(a,s.name,u,t,e,i)}))}return a.ellipsis=function(e){return arguments.length?(t=e,a):t},a.subSupScript=function(t){return arguments.length?(e=t,a):e},a.linkNbOnly=function(t){return arguments.length?(n=t,a):n},a.labelKind=function(t){return arguments.length?(o=t,a):o},a.subXdsmLink=function(t){return arguments.length?(i=t,a):i},a},r.tooltipize=function(){var t="",e=!1;function n(n){var o=[];e?r.strParse(t).forEach((function(t){var e=t.base;t.sub&&(e+="<sub>".concat(t.sub,"</sub>")),t.sup&&(e+="<sup>".concat(t.sup,"</sup>")),o.push(e)})):o=t.split(","),n.html(o.join(", "))}return n.text=function(e){return arguments.length?(t=e,n):t},n.subSupScript=function(t){return arguments.length?(e=t,n):e},n},e.a=r},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||l||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r={},o={};function i(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function a(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function s(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function u(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+s(-e,6):9999<e?"+"+s(e,6):s(e,4))+"-"+s(t.getUTCMonth()+1,2)+"-"+s(t.getUTCDate(),2)+(i?"T"+s(n,2)+":"+s(r,2)+":"+s(o,2)+"."+s(i,3)+"Z":o?"T"+s(n,2)+":"+s(r,2)+":"+s(o,2)+"Z":r||n?"T"+s(n,2)+":"+s(r,2)+"Z":"")}var c=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function s(t,e){var i,a=[],s=t.length,u=0,c=0,l=s<=0,f=!1;function p(){if(l)return o;if(f)return f=!1,r;var e,i,a=u;if(34===t.charCodeAt(a)){for(;u++<s&&34!==t.charCodeAt(u)||34===t.charCodeAt(++u););return(e=u)>=s?l=!0:10===(i=t.charCodeAt(u++))?f=!0:13===i&&(f=!0,10===t.charCodeAt(u)&&++u),t.slice(a+1,e-1).replace(/""/g,'"')}for(;u<s;){if(10===(i=t.charCodeAt(e=u++)))f=!0;else if(13===i)f=!0,10===t.charCodeAt(u)&&++u;else if(i!==n)continue;return t.slice(a,e)}return l=!0,t.slice(a,s)}for(10===t.charCodeAt(s-1)&&--s,13===t.charCodeAt(s-1)&&--s;(i=p())!==o;){for(var d=[];i!==r&&i!==o;)d.push(i),i=p();e&&null==(d=e(d,c++))||a.push(d)}return a}function c(e,n){return e.map((function(e){return n.map((function(t){return f(e[t])})).join(t)}))}function l(e){return e.map(f).join(t)}function f(t){return null==t?"":t instanceof Date?u(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=s(t,(function(t,o){if(n)return n(t,o-1);var a,s,u;r=t,n=e?(s=e,u=i(a=t),function(t,e){return s(u(t),e,a)}):i(t)}));return o.columns=r||[],o},parseRows:s,format:function(e,n){return null==n&&(n=a(e)),[n.map(f).join(t)].concat(c(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=a(t)),c(t,e).join("\n")},formatRows:function(t){return t.map(l).join("\n")},formatRow:l,formatValue:f}},l=c(","),f=l.parse,p=(l.parseRows,l.format,l.formatBody,l.formatRows,l.formatRow,l.formatValue,c("\t")),d=p.parse;function h(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}p.parseRows,p.format,p.formatBody,p.formatRows,p.formatRow,p.formatValue;var y=function(t,e){return fetch(t,e).then(h)};function g(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),y(e,n).then((function(e){return t(e,r)}))}}function m(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function v(t){return function(e,n){return y(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}function b(){}function w(t){return null==t?b:function(){return this.querySelector(t)}}function _(){return[]}function x(t){return null==t?_:function(){return this.querySelectorAll(t)}}function E(t){return function(){return this.matches(t)}}function S(t){return new Array(t.length)}function A(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function O(t,e,n,r,o,i){for(var a,s=0,u=e.length,c=i.length;s<c;++s)(a=e[s])?(a.__data__=i[s],r[s]=a):n[s]=new A(t,i[s]);for(;s<u;++s)(a=e[s])&&(o[s]=a)}function k(t,e,n,r,o,i,a){var s,u,c,l={},f=e.length,p=i.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=c="$"+a.call(u,u.__data__,s,e),c in l?o[s]=u:l[c]=u);for(s=0;s<p;++s)(u=l[c="$"+a.call(t,i[s],s,i)])?((r[s]=u).__data__=i[s],l[c]=null):n[s]=new A(t,i[s]);for(s=0;s<f;++s)(u=e[s])&&l[d[s]]===u&&(o[s]=u)}function P(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function N(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),j.hasOwnProperty(e)?{space:j[e],local:t}:t}g(f),g(d),v("application/xml"),v("text/html"),v("image/svg+xml"),A.prototype={constructor:A,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var T="http://www.w3.org/1999/xhtml",j={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},R=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function D(t,e){return t.style.getPropertyValue(e)||R(t).getComputedStyle(t,null).getPropertyValue(e)}function B(t){return t.trim().split(/^|\s+/)}function M(t){return t.classList||new C(t)}function C(t){this._node=t,this._names=B(t.getAttribute("class")||"")}function q(t,e){for(var n=M(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function U(t,e){for(var n=M(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function I(){this.textContent=""}function L(){this.innerHTML=""}function F(){this.nextSibling&&this.parentNode.appendChild(this)}function G(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z(t){var e=N(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===T&&e.documentElement.namespaceURI===T?e.createElement(t):e.createElementNS(n,t)}})(e)}function W(){return null}function Y(){var t=this.parentNode;t&&t.removeChild(this)}function X(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}C.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var V={},H=null;function J(t,e,n){return t=K(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function K(t,e,n){return function(r){var o=H;H=r;try{t.call(this,this.__data__,e,n)}finally{H=o}}}function Z(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function Q(t,e,n){var r=V.hasOwnProperty(t.type)?J:K;return function(o,i,a){var s,u=this.__on,c=r(e,i,a);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function tt(t,e,n){var r=R(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(V={mouseenter:"mouseover",mouseleave:"mouseout"}));var et=[null];function nt(t,e){this._groups=t,this._parents=e}function rt(){return new nt([[document.documentElement]],et)}function ot(t){return"string"==typeof t?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],et)}function it(t){return"string"==typeof t?new nt([document.querySelectorAll(t)],[document.documentElement]):new nt([null==t?[]:t],et)}nt.prototype=rt.prototype={constructor:nt,select:function(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=e[o],u=s.length,c=r[o]=new Array(u),l=0;l<u;++l)(i=s[l])&&(a=t.call(i,i.__data__,l,s))&&("__data__"in i&&(a.__data__=i.__data__),c[l]=a);return new nt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var a,s=e[i],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),o.push(a));return new nt(r,o)},filter:function(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,u=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&u.push(i);return new nt(r,this._parents)},data:function(t,e){if(!t)return h=new Array(this.size()),l=-1,this.each((function(t){h[++l]=t})),h;var n,r=e?k:O,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=i.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var f=o[l],p=i[l],d=p.length,h=t.call(f,f&&f.__data__,l,o),y=h.length,g=u[l]=new Array(y),m=s[l]=new Array(y);r(f,p,g,m,c[l]=new Array(d),h,e);for(var v,b,w=0,_=0;w<y;++w)if(v=g[w]){for(_<=w&&(_=w+1);!(b=m[_])&&++_<y;);v._next=b||null}}return(s=new nt(s,o))._enter=u,s._exit=c,s},enter:function(){return new nt(this._enter||this._groups.map(S),this._parents)},exit:function(){return new nt(this._exit||this._groups.map(S),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var u,c=e[s],l=n[s],f=c.length,p=a[s]=new Array(f),d=0;d<f;++d)(u=c[d]||l[d])&&(p[d]=u);for(;s<r;++s)a[s]=e[s];return new nt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,a=o[i];0<=--i;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t=t||P;for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],u=s.length,c=o[i]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new nt(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],a=0,s=i.length;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,e){var n=N(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):D(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=B(t+"");if(arguments.length<2){for(var r=M(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?q:U)(this,t)}}:e?function(t){return function(){q(this,t)}}:function(t){return function(){U(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?L:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(F)},lower:function(){return this.each(G)},append:function(t){var e="function"==typeof t?t:z(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:z(t),r=null==e?W:"function"==typeof e?e:w(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Y)},clone:function(t){return this.select(t?$:X)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})),a=i.length;if(!(arguments.length<2)){for(s=e?Q:Z,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return tt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return tt(this,t,e)}})(t,e))}};var at=rt,st=n(0),ut={value:function(){}};function ct(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new lt(r)}function lt(t){this._=t}function ft(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function pt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=ut,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}lt.prototype=ct.prototype={constructor:lt,on:function(t,e){var n,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)o[n]=pt(o[n],t.name,e);else if(null==e)for(n in o)o[n]=pt(o[n],t.name,null);return this}for(;++a<s;)if((n=(t=i[a]).type)&&(n=ft(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new lt(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var dt,ht,yt=ct,gt=0,mt=0,vt=0,bt=0,wt=0,_t=0,xt="object"==typeof performance&&performance.now?performance:Date,Et="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return wt||(Et(At),wt=xt.now()+_t)}function At(){wt=0}function Ot(){this._call=this._time=this._next=null}function kt(t,e,n){var r=new Ot;return r.restart(t,e,n),r}function Pt(){wt=(bt=xt.now())+_t,gt=mt=0;try{!function(){St(),++gt;for(var t,e=dt;e;)0<=(t=wt-e._time)&&e._call.call(null,t),e=e._next;--gt}()}finally{gt=0,function(){for(var t,e,n=dt,r=1/0;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:dt=e);ht=t,Tt(r)}(),wt=0}}function Nt(){var t=xt.now(),e=t-bt;1e3<e&&(_t-=e,bt=t)}function Tt(t){gt||(mt=mt&&clearTimeout(mt),24<t-wt?(t<1/0&&(mt=setTimeout(Pt,t-xt.now()-_t)),vt=vt&&clearInterval(vt)):(vt||(bt=xt.now(),vt=setInterval(Nt,1e3)),gt=1,Et(Pt)))}function jt(t,e,n){var r=new Ot;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}function Rt(t,e,n,r,o,i){var a,s,u,c,l,f=t.__transition;if(f){if(n in f)return}else t.__transition={};function p(t){var e,n,r,o;if(1!==u.state)return h();for(e in l)if((o=l[e]).name===u.name){if(o.state===Ct)return jt(p);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",a,a.__data__,o.index,o.group),delete l[e]):+e<s&&(o.state=6,o.timer.stop(),o.on.call("cancel",a,a.__data__,o.index,o.group),delete l[e])}if(jt((function(){u.state===Ct&&(u.state=4,u.timer.restart(d,u.delay,u.time),d(t))})),u.state=2,u.on.call("start",a,a.__data__,u.index,u.group),2===u.state){for(u.state=Ct,c=new Array(r=u.tween.length),e=0,n=-1;e<r;++e)(o=u.tween[e].value.call(a,a.__data__,u.index,u.group))&&(c[++n]=o);c.length=n+1}}function d(t){for(var e=t<u.duration?u.ease.call(null,t/u.duration):(u.timer.restart(h),u.state=5,1),n=-1,r=c.length;++n<r;)c[n].call(a,e);5===u.state&&(u.on.call("end",a,a.__data__,u.index,u.group),h())}function h(){for(var t in u.state=6,u.timer.stop(),delete l[s],l)return;delete a.__transition}a=t,s=n,u={name:e,index:r,group:o,on:Dt,tween:Bt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Mt},((l=a.__transition)[s]=u).timer=kt((function(t){u.state=1,u.timer.restart(p,u.delay,u.time),u.delay<=t&&p(t-u.delay)}),0,u.time)}Ot.prototype=kt.prototype={constructor:Ot,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||ht===this||(ht?ht._next=this:dt=this,ht=this),this._call=t,this._time=n,Tt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tt())}};var Dt=yt("start","end","cancel","interrupt"),Bt=[],Mt=0,Ct=3;function qt(t,e){var n=It(t,e);if(n.state>Mt)throw new Error("too late; already scheduled");return n}function Ut(t,e){var n=It(t,e);if(n.state>Ct)throw new Error("too late; already running");return n}function It(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Lt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ft(t,e,n,r,o,i){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*Xt,skewX:Math.atan(u)*Xt,scaleX:a,scaleY:s}}var Gt,zt,Wt,Yt,Xt=180/Math.PI,$t={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vt(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}return function(i,a){var s,u,c,l,f,p,d=[],h=[];return i=t(i),a=t(a),function(t,r,o,i,a,s){if(t!==o||r!==i){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Lt(t,o)},{i:u-2,x:Lt(r,i)})}else(o||i)&&a.push("translate("+o+e+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,d,h),s=i.rotate,u=a.rotate,c=d,s!==u?(180<s-u?u+=360:180<u-s&&(s+=360),h.push({i:c.push(o(c)+"rotate(",null,r)-2,x:Lt(s,u)})):u&&c.push(o(c)+"rotate("+u+r),l=i.skewX,f=a.skewX,p=d,l!==f?h.push({i:p.push(o(p)+"skewX(",null,r)-2,x:Lt(l,f)}):f&&p.push(o(p)+"skewX("+f+r),function(t,e,n,r,i,a){if(t!==n||e!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Lt(t,n)},{i:s-2,x:Lt(e,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,d,h),i=a=null,function(t){for(var e,n=-1,r=h.length;++n<r;)d[(e=h[n]).i]=e.x(t);return d.join("")}}}var Ht=Vt((function(t){return"none"===t?$t:(Gt||(Gt=document.createElement("DIV"),zt=document.documentElement,Wt=document.defaultView),Gt.style.transform=t,t=Wt.getComputedStyle(zt.appendChild(Gt),null).getPropertyValue("transform"),zt.removeChild(Gt),Ft(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Jt=Vt((function(t){return null==t?$t:((Yt=Yt||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=Yt.transform.baseVal.consolidate())?Ft((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):$t)}),", ",")",")");function Kt(t,e,n){var r=t._id;return t.each((function(){var t=Ut(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return It(t,r).value[e]}}function Zt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function te(){}var ee="\\s*([+-]?\\d+)\\s*",ne="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",re="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oe=/^#([0-9a-f]{3,8})$/,ie=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),ae=new RegExp("^rgb\\("+[re,re,re]+"\\)$"),se=new RegExp("^rgba\\("+[ee,ee,ee,ne]+"\\)$"),ue=new RegExp("^rgba\\("+[re,re,re,ne]+"\\)$"),ce=new RegExp("^hsl\\("+[ne,re,re]+"\\)$"),le=new RegExp("^hsla\\("+[ne,re,re,ne]+"\\)$"),fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pe(){return this.rgb().formatHex()}function de(){return this.rgb().formatRgb()}function he(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ye(e):3===n?new ve(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new ve(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new ve(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ie.exec(t))?new ve(e[1],e[2],e[3],1):(e=ae.exec(t))?new ve(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=se.exec(t))?ge(e[1],e[2],e[3],e[4]):(e=ue.exec(t))?ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ce.exec(t))?xe(e[1],e[2]/100,e[3]/100,1):(e=le.exec(t))?xe(e[1],e[2]/100,e[3]/100,e[4]):fe.hasOwnProperty(t)?ye(fe[t]):"transparent"===t?new ve(NaN,NaN,NaN,0):null}function ye(t){return new ve(t>>16&255,t>>8&255,255&t,1)}function ge(t,e,n,r){return r<=0&&(t=e=n=NaN),new ve(t,e,n,r)}function me(t,e,n,r){return 1===arguments.length?((o=t)instanceof te||(o=he(o)),o?new ve((o=o.rgb()).r,o.g,o.b,o.opacity):new ve):new ve(t,e,n,null==r?1:r);var o}function ve(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function be(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)}function we(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function _e(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function xe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Se(t,e,n,r)}function Ee(t){if(t instanceof Se)return new Se(t.h,t.s,t.l,t.opacity);if(t instanceof te||(t=he(t)),!t)return new Se;if(t instanceof Se)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,s=i-o,u=(i+o)/2;return s?(a=e===i?(n-r)/s+6*(n<r):n===i?(r-e)/s+2:(e-n)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=0<u&&u<1?0:a,new Se(a,s,u,t.opacity)}function Se(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ae(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Oe(t,e,n,r,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*e+(4-6*i+3*a)*n+(1+3*t+3*i-3*a)*r+a*o)/6}Zt(te,he,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:pe,formatHex:pe,formatHsl:function(){return Ee(this).formatHsl()},formatRgb:de,toString:de}),Zt(ve,me,Qt(te,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ve(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ve(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:be,formatHex:be,formatRgb:we,toString:we})),Zt(Se,(function(t,e,n,r){return 1===arguments.length?Ee(t):new Se(t,e,n,null==r?1:r)}),Qt(te,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Se(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Se(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new ve(Ae(240<=t?t-240:120+t,o,r),Ae(t,o,r),Ae(t<120?240+t:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ke=function(t){return function(){return t}};function Pe(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ke(isNaN(t)?e:t)}var Ne=function t(e){var n=function(t){return 1==(t=+t)?Pe:function(e,n){return n-e?(r=e,o=n,i=t,r=Math.pow(r,i),o=Math.pow(o,i)-r,i=1/i,function(t){return Math.pow(r+t*o,i)}):ke(isNaN(e)?n:e);var r,o,i}}(e);function r(t,e){var r=n((t=me(t)).r,(e=me(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),a=Pe(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Te(t){return function(e){var n,r,o=e.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=me(e[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=t(i),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=i(t),r.g=a(t),r.b=s(t),r+""}}}Te((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:1<=n?e-(n=1):Math.floor(n*e),o=t[r],i=t[r+1],a=0<r?t[r-1]:2*o-i,s=r<e-1?t[r+2]:2*i-o;return Oe((n-r/e)*e,a,o,i,s)}})),Te((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],i=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Oe((n-r/e)*e,o,i,a,s)}}));var je=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Re=new RegExp(je.source,"g");function De(t,e){var n,r,o,i,a,s=je.lastIndex=Re.lastIndex=0,u=-1,c=[],l=[];for(t+="",e+="";(n=je.exec(t))&&(r=Re.exec(e));)(o=r.index)>s&&(o=e.slice(s,o),c[u]?c[u]+=o:c[++u]=o),(n=n[0])===(r=r[0])?c[u]?c[u]+=r:c[++u]=r:(c[++u]=null,l.push({i:u,x:Lt(n,r)})),s=Re.lastIndex;return s<e.length&&(o=e.slice(s),c[u]?c[u]+=o:c[++u]=o),c.length<2?l[0]?(a=l[0].x,function(t){return a(t)+""}):(i=e,function(){return i}):(e=l.length,function(t){for(var n,r=0;r<e;++r)c[(n=l[r]).i]=n.x(t);return c.join("")})}function Be(t,e){var n;return("number"==typeof e?Lt:e instanceof he?Ne:(n=he(e))?(e=n,Ne):De)(t,e)}function Me(t,e){var n,r;function o(){var o,i,a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&(o=t,i=a,function(t){this.setAttributeNS(o.space,o.local,i.call(this,t))})),n}return o._value=e,o}function Ce(t,e){var n,r;function o(){var o,i,a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&(o=t,i=a,function(t){this.setAttribute(o,i.call(this,t))})),n}return o._value=e,o}function qe(t,e,n){var r,o,i=(e+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t}))?qt:Ut;return function(){var a=i(this,t),s=a.on;s!==r&&(o=(r=s).copy()).on(e,n),a.on=o}}var Ue=at.prototype.constructor;function Ie(t){return function(){this.style.removeProperty(t)}}function Le(t,e,n){var r,o;function i(){var i,a,s,u=e.apply(this,arguments);return u!==o&&(r=(o=u)&&(i=t,a=u,s=n,function(t){this.style.setProperty(i,a.call(this,t),s)})),r}return i._value=e,i}function Fe(t){var e,n;function r(){var r,o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&(r=o,function(t){this.textContent=r.call(this,t)})),e}return r._value=t,r}var Ge=0;function ze(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function We(){return++Ge}var Ye=at.prototype;ze.prototype={constructor:ze,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=w(t));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,u,c=r[a],l=c.length,f=i[a]=new Array(l),p=0;p<l;++p)(s=c[p])&&(u=t.call(s,s.__data__,p,c))&&("__data__"in s&&(u.__data__=s.__data__),f[p]=u,Rt(f[p],e,n,p,f,It(s,n)));return new ze(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=x(t));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var u,c=r[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var p,d=t.call(u,u.__data__,f,c),h=It(u,n),y=0,g=d.length;y<g;++y)(p=d[y])&&Rt(p,e,n,y,d,h);i.push(d),a.push(u)}return new ze(i,a,e,n)},filter:function(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,u=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&u.push(i);return new ze(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var u,c=e[s],l=n[s],f=c.length,p=a[s]=new Array(f),d=0;d<f;++d)(u=c[d]||l[d])&&(p[d]=u);for(;s<r;++s)a[s]=e[s];return new ze(a,this._parents,this._name,this._id)},selection:function(){return new Ue(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=We(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=It(a,e);Rt(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ze(r,this._parents,t,n)},call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:function(t,e){var n=this._id;return arguments.length<2?It(this.node(),n).on.on(t):this.each(qe(n,t,e))},attr:function(t,e){var n=N(t),r="transform"===n?Jt:Be;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,o,i;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===o?i:(o=s,i=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,o,i;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===o?i:(o=s,i=e(r=a,u));this.removeAttribute(t)}})(n,r,Kt(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}:function(t,e,n){var r,o,i=n+"";return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=N(t);return this.tween(n,(r.local?Me:Ce)(r,e))},style:function(t,e,n){var r,o,i,a,s,u,c,l,f,p,d,h,y,g,m,v,b,w,_,x,E,S,A,O,k,P="transform"==(t+="")?Ht:Be;return null==e?this.styleTween(t,(E=t,S=P,function(){var t=D(this,E),e=(this.style.removeProperty(E),D(this,E));return t===e?null:t===A&&e===O?k:k=S(A=t,O=e)})).on("end.style."+t,Ie(t)):"function"==typeof e?this.styleTween(t,(v=P,b=Kt(this,"style."+(m=t),e),function(){var t=D(this,m),e=b(this),n=e+"";return null==e&&(this.style.removeProperty(m),n=e=D(this,m)),t===n?null:t===w&&n===_?x:(_=n,x=v(w=t,e))})).each((c=this._id,g="end."+(y="style."+(l=t)),function(){var t=Ut(this,c),e=t.on,n=null==t.value[y]?h=h||Ie(l):void 0;e===f&&d===n||(p=(f=e).copy()).on(g,d=n),t.on=p})):this.styleTween(t,(r=t,o=P,u=(i=e)+"",function(){var t=D(this,r);return t===u?null:t===a?s:s=o(a=t,i)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Le(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Kt(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Fe(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,o=It(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var o=Ut(this,t),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}o.tween=r}}:function(t,e,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=Ut(this,t),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:e,value:n},u=0,c=o.length;u<c;++u)if(o[u].name===e){o[u]=s;break}u===c&&o.push(s)}i.tween=o}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){qt(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){qt(this,t).delay=e}})(e,t)):It(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ut(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ut(this,t).duration=e}})(e,t)):It(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Ut(this,t).ease=e}}(e,t)):It(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var s={value:a},u={value:function(){0==--o&&i()}};n.each((function(){var n=Ut(this,r),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var Xe={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function $e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Xe.time=St(),Xe;return n}at.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,o,i=t.__transition,a=!0;if(i){for(o in e=null==e?null:e+"",i)(n=i[o]).name===e?(r=2<n.state&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete t.__transition}}(this,t)}))},at.prototype.transition=function(t){var e,n;t=t instanceof ze?(e=t._id,t._name):(e=We(),(n=Xe).time=St(),null==t?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],u=s.length,c=0;c<u;++c)(a=s[c])&&Rt(a,t,e,c,s,n||$e(a,e));return new ze(r,this._parents,t,e)};var Ve=n(2);function He(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?He(Object(n),!0).forEach((function(e){Ke(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ze="xdsm",Qe="xdsm2";function tn(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}function en(t,e,n){this.graph=t,this.version=n.version||Qe;var r=ot(".".concat(this.version));this.svg=r.append("svg").attr("width",1e3).attr("height",500).attr("id",e),this.grid=[],this.nodes=[],this.edges=[],this.svgid=e,this.default_config={labelizer:{ellipsis:5,subSupScript:!0,showLinkNbOnly:!1},layout:{origin:{x:100,y:20},cellsize:{w:250,h:75},padding:20},withDefaultDriver:!0,withTitleTooltip:!0},this.config=Je({},this.default_config,{},n),this.config.labelizer=Je({},this.default_config.labelizer,{},n.labelizer),this.config.layout=Je({},this.default_config.layout,{},n.layout),this.config.withTitleTooltip&&(this.tooltip=ot("body").append("div").attr("class","xdsm-tooltip").style("opacity",0)),this._initialize()}en.prototype.setVersion=function(t){this.version=t},en.prototype.addNode=function(t){this.graph.addNode(t),this.draw()},en.prototype.removeNode=function(t){this.graph.removeNode(t),this.draw()},en.prototype.hasWorkflow=function(){return 0!==this.graph.chains.length},en.prototype._initialize=function(){var t=this;t._createTitle(),t.nodeGroup=t.svg.append("g").attr("class","nodes"),t.edgeGroup=t.svg.append("g").attr("class","edges")},en.prototype.updateMdo=function(t){this.graph=new st.a(t,this.config.withDefaultDriver),this.refresh()},en.prototype.refresh=function(){var t=this;t.svg.selectAll("g").remove(),t.nodeGroup=t.svg.append("g").attr("class","nodes"),t.edgeGroup=t.svg.append("g").attr("class","edges"),t.draw()},en.prototype.draw=function(){var t=this;t.nodes=t._createTextGroup("node",t.nodeGroup,t._customRect),t.edges=t._createTextGroup("edge",t.edgeGroup,t._customTrapz),t._createWorkflow(),t._createDataflow(),t._createBorder();var e=t.config.layout.cellsize.w*(t.graph.nodes.length+1),n=t.config.layout.cellsize.h*(t.graph.nodes.length+1);t.svg.attr("width",e).attr("height",n),t.svg.selectAll(".border").attr("height",n-4).attr("width",e-4)},en.prototype._createTextGroup=function(t,e,n){var r=this,o=e.selectAll(".".concat(t)).data(this.graph["".concat(t,"s")],(function(t){return t.id})),i=Ve.a.labelize().labelKind(t).ellipsis(r.config.labelizer.ellipsis).subSupScript(r.config.labelizer.subSupScript).linkNbOnly(r.config.labelizer.showLinkNbOnly),a=o.enter().append("g").attr("class",(function(e){var n="node"===t?e.type:"dataInter";return"dataInter"!==n||0!==e.row&&0!==e.col||(n="dataIO"),"id".concat(e.id," ").concat(t," ").concat(n)})).each((function(t){ot(this).call(i.subXdsmLink(t.subxdsm))})).each((function(t,e){var n=r.grid,o=ot(this);void 0===n[e]&&(n[e]=new Array(r.graph.nodes.length)),o.select("text").each((function(t,r){var i=ot(this),a=o.data()[0],s=void 0===a.row?e:a.row,u=void 0===a.col?e:a.col,c=i.nodes()[r].getBBox();n[s][u]=new tn(-c.width/2,0,c.width,c.height),i.attr("width",(function(){return n[s][u].width})).attr("height",(function(){return n[s][u].height})).attr("x",(function(){return n[s][u].x})).attr("y",(function(){return n[s][u].y}))}))})).each((function(t,e){var o=ot(this);o.call(n.bind(r),t,e,0),t.isMulti&&(o.call(n.bind(r),t,e,+Number(3)),o.call(n.bind(r),t,e,2*Number(3)))})).merge(o);o.exit().remove(),r.tooltip?it(".ellipsized").on("mouseover",(function(t){r.tooltip.transition().duration(200).style("opacity",.9);var e=Ve.a.tooltipize().subSupScript(r.config.labelizer.subSupScript).text(t.name);r.tooltip.call(e).style("width","".concat(300,"px")).style("left","".concat(H.pageX,"px")).style("top","".concat(H.pageY-28,"px"))})).on("mouseout",(function(){r.tooltip.transition().duration(500).style("opacity",0)})):it(".ellipsized").attr("title",(function(t){return t.name.split(",").join(", ")})),r._layoutText(a,n,(o.empty(),0))},en.prototype._layoutText=function(t,e,n){var r=this;t.transition().duration(n).attr("transform",(function(t,e){var n=void 0===t.col?e:t.col,o=void 0===t.row?e:t.row,i=r.config.layout.cellsize.w*n+r.config.layout.origin.x,a=r.config.layout.cellsize.h*o+r.config.layout.origin.y;return"translate(".concat(r.config.layout.origin.x+i,",").concat(r.config.layout.origin.y+a,")")}))},en.prototype._createWorkflow=function(){var t=this;this.svg.selectAll(".workflow").data([t.graph]).enter().insert("g",":first-child").attr("class","workflow").selectAll("g").data(t.graph.chains).enter().insert("g").attr("class","workflow-chain").selectAll("path").data((function(t){return t})).enter().append("path").attr("class",(function(t){return"link_".concat(t[0],"_").concat(t[1])})).attr("transform",(function(e){var n,r,o=Math.max(e[0],e[1]),i=Math.min(e[0],e[1]);return r=e[0]<e[1]?(n=t.config.layout.cellsize.w*o+t.config.layout.origin.x,t.config.layout.cellsize.h*i+t.config.layout.origin.y):(n=t.config.layout.cellsize.w*i+t.config.layout.origin.x,t.config.layout.cellsize.h*o+t.config.layout.origin.y),"translate(".concat(t.config.layout.origin.x+n,",").concat(t.config.layout.origin.y+r,")")})).attr("d",(function(e){var n=t.config.layout.cellsize.w*Math.abs(e[0]-e[1]),r=t.config.layout.cellsize.h*Math.abs(e[0]-e[1]),o=[];return e[0]<e[1]?(0!==e[0]&&o.push("".concat(-n,",0")),o.push("0,0"),0!==e[1]&&o.push("0,".concat(r))):(0!==e[0]&&o.push("".concat(n,",0")),o.push("0,0"),0!==e[1]&&o.push("0,".concat(-r))),"M".concat(o.join(" "))}))},en.prototype._createDataflow=function(){var t=this;t.svg.selectAll(".dataflow").data([t]).enter().insert("g",":first-child").attr("class","dataflow");var e=t.svg.select(".dataflow").selectAll("path").data(t.graph.edges,(function(t){return t.id}));e.enter().append("path").merge(e).transition().duration((e.empty(),0)).attr("transform",(function(e,n){var r=void 0===e.col?n:e.col,o=void 0===e.row?n:e.row,i=t.config.layout.cellsize.w*r+t.config.layout.origin.x,a=t.config.layout.cellsize.h*o+t.config.layout.origin.y;return"translate(".concat(t.config.layout.origin.x+i,",").concat(t.config.layout.origin.y+a,")")})).attr("d",(function(e){var n=t.config.layout.cellsize.w*Math.abs(e.col-e.row),r=t.config.layout.cellsize.h*Math.abs(e.col-e.row),o=[];return"in"===e.iotype?(0!==e.row&&o.push("".concat(-n,",0")),o.push("0,0"),0!==e.col&&o.push("0,".concat(r))):(0!==e.row&&o.push("".concat(n,",0")),o.push("0,0"),0!==e.col&&o.push("0,".concat(-r))),"M".concat(o.join(" "))})),e.exit().remove()},en.prototype._customRect=function(t,e,n,r){var o=this,i=o.grid;if(this.version!==Qe||"group"!==e.type&&"implicit-group"!==e.type&&"sub-optimization"!==e.type&&"mdo"!==e.type)t.insert("rect",":first-child").classed("shape",!0).attr("x",(function(){return i[n][n].x+r-o.config.layout.padding})).attr("y",(function(){return-i[n][n].height*(2/3)-o.config.layout.padding-r})).attr("width",(function(){return i[n][n].width+2*o.config.layout.padding})).attr("height",(function(){return i[n][n].height+2*o.config.layout.padding})).attr("rx",(function(){return"driver"===e.type||"optimization"===e.type||"mda"===e.type||"doe"===e.type?(i[n][n].height+2*o.config.layout.padding)/2:0})).attr("ry",(function(){return"driver"===e.type||"optimization"===e.type||"mda"===e.type||"doe"===e.type?(i[n][n].height+2*o.config.layout.padding)/2:0}));else{var a=i[n][n].x+r-o.config.layout.padding,s=-i[n][n].height*(2/3)-o.config.layout.padding-r,u=i[n][n].x+r+o.config.layout.padding+i[n][n].width,c=-i[n][n].height*(2/3)+o.config.layout.padding-r+i[n][n].height,l="".concat(10+a,",").concat(s," ").concat(u-10,",").concat(s," ").concat(u,",").concat(10+s," ").concat(u,",").concat(c-10," ").concat(u-10,",").concat(c," ").concat(10+a,",").concat(c," ").concat(a,",").concat(c-10," ").concat(a,",").concat(10+s);t.insert("polygon",":first-child").classed("shape",!0).attr("points",l)}},en.prototype._customTrapz=function(t,e,n,r){var o=this.grid;t.insert("polygon",":first-child").classed("shape",!0).attr("points",(function(t){var e=o[t.row][t.col].width,n=o[t.row][t.col].height;return["".concat(-5-e/2+r,", ").concat(-5-n*(2/3)-r," "),"".concat(e/2+5+r+5,", ").concat(-5-n*(2/3)-r," "),"".concat(e/2+5+r-5+5,", ").concat(5+n/3-r," "),"".concat(-5-e/2+r-5,", ").concat(5+n/3-r," ")].join(" ")}))},en.prototype._createTitle=function(){var t=this;t.svg.selectAll(".title").data([t.svgid]).enter().append("g").classed("title",!0).append("a").attr("id",t.svgid).append("text").text("root"===t.svgid?"":t.svgid).attr("transform","translate(".concat(t.config.layout.origin.x,", ").concat(t.config.layout.origin.y-5,")"))},en.prototype._createBorder=function(){this.svg.selectAll(".border").data([this]).enter().append("rect").classed("border",!0).attr("x",4).attr("y",4).style("stroke","black").style("fill","none").style("stroke-width",0)};var nn=en;function rn(t,e){this._xdsm=t,this._selection=null,this._prevSelection=null,this._callback=e,this.enable()}rn.prototype.enable=function(){this._addEventHandler(".node"),this._addEventHandler(".edge")},rn.prototype._addEventHandler=function(t){var e=this;it(t).on("click",(function(){var t=ot('[data-xdsm-selected="true"]');e._unselect(t);var n=ot(this);!t.empty()&&t.data()[0].id===n.data()[0].id||e._select(n),e._callback(e.getFilter())}))},rn.prototype._select=function(t){t.attr("data-xdsm-selected",!0),t.select(".shape").transition().duration(100).style("stroke-width","4px")},rn.prototype._unselect=function(t){t.attr("data-xdsm-selected",null),t.select(".shape").transition().duration(100).style("stroke-width",null)},rn.prototype.getFilter=function(){var t={fr:void 0,to:void 0},e=ot('[data-xdsm-selected="true"]');if(!e.empty()){var n=e.data()[0];n.iotype?(t.fr=this._xdsm.graph.getNodeFromIndex(n.row).id,t.to=this._xdsm.graph.getNodeFromIndex(n.col).id):(t.fr=n.id,t.to=n.id)}return t},rn.prototype.setFilter=function(t){var e,n=ot('[data-xdsm-selected="true"]');t.fr===t.to?void 0!==t.fr&&(e=ot(".id".concat(t.fr)),this._select(e)):void 0!==t.fr&&void 0!==t.to&&(e=ot(".idlink_".concat(t.fr,"_").concat(t.to)),this._select(e)),e&&!e.empty()&&(n.empty()||n.data()[0].id===e.data()[0].id)||this._unselect(n)};var on=rn,an=me("seagreen"),sn=me("firebrick"),un=me("darkseagreen"),cn=me("darkcyan");function ln(t,e,n){void 0===(this.rootId=e)&&(this.rootId="root"),this.root=t[this.rootId],this.xdsms=t,this.duration=700,this.initialDelay=n||0,this._observers=[],this.reset()}ln.STATUS={READY:"ready",RUNNING_STEP:"running_step",RUNNING_AUTO:"running_auto",STOPPED:"stopped",DONE:"done",DISABLED:"disabled"},ln.prototype.reset=function(){this.curStep=0,this.subAnimations={},this._updateStatus(ln.STATUS.READY)},ln.prototype.start=function(){this._scheduleAnimation(),this._updateStatus(ln.STATUS.RUNNING_AUTO)},ln.prototype.stop=function(){this._reset("all"),this._updateStatus(ln.STATUS.STOPPED)},ln.prototype.stepPrev=function(){this._step("prev")},ln.prototype.stepNext=function(){this._step("next")},ln.prototype.setXdsmVersion=function(t){Object.values(this.xdsms).forEach((function(e){e.setVersion(t),e.refresh()}),this)},ln.prototype._step=function(t){var e="prev"===t,n=this,r=n.xdsms[n.rootId].graph,o=r.nodesByStep,i=e?-1:1;!e&&n.done()||e&&n.ready()||(n._subAnimationInProgress()||(n.curStep+=i,n._reset(),o[n.curStep].forEach((function(t){n.running()&&o[n.curStep-i].forEach((function(r){e?n._pulseLink(0,t,r):n._pulseLink(0,r,t);var o="g.id".concat(r);n._pulseNode(0,o,"out")}));var r="g.id".concat(t);n._pulseNode(0,r,"in")}))),o[n.curStep].some(n._isSubXdsm,this)&&o[n.curStep].forEach((function(e){if(n._isSubXdsm(e)){var o=r.getNode(e).getSubXdsmId();n.subAnimations[o]||(n.subAnimations[o]=new ln(n.xdsms,o)),n.subAnimations[o]._step(t)}}),this),this.done()?this._updateStatus(ln.STATUS.DONE):this.ready()?this._updateStatus(ln.STATUS.READY):this._updateStatus(ln.STATUS.RUNNING_STEP))},ln.prototype.running=function(){return!this.ready()&&!this.done()},ln.prototype.ready=function(){return 0===this.curStep},ln.prototype.done=function(){return this.curStep===this.root.graph.nodesByStep.length-1},ln.prototype.isStatus=function(t){return this.status===t},ln.prototype.addObserver=function(t){t&&this._observers.push(t)},ln.prototype.renderNodeStatuses=function(){var t=this,e=t.xdsms[t.rootId].graph;e.nodes.forEach((function(n){var r="g.".concat(n.id);switch(n.status){case st.a.NODE_STATUS.RUNNING:t._pulseNode(0,r,"in",an);break;case st.a.NODE_STATUS.FAILED:t._pulseNode(0,r,"in",sn);break;case st.a.NODE_STATUS.PENDING:t._pulseNode(0,r,"in",un);break;case st.a.NODE_STATUS.DONE:t._pulseNode(0,r,"in",cn)}if(t._isSubXdsm(n.id)){var o=e.getNode(n.id).getSubXdsmId();new ln(t.xdsms,o).renderNodeStatuses()}}))},ln.prototype._updateStatus=function(t){this.status=t,this._notifyObservers(t)},ln.prototype._notifyObservers=function(){var t=this;this._observers.map((function(e){return e.update(t.status)}))},ln.prototype._pulse=function(t,e,n,r){var o=r||an,i=ot("svg#".concat(this.rootId)).selectAll(e).transition().delay(t);"out"!==n&&(i=i.transition().duration(200).style("stroke-width","8px").style("stroke",o).style("fill",(function(t){return t.id?o.brighter():null}))),"in"!==n&&i.transition().duration(2100).style("stroke-width",null).style("stroke",null).style("fill",null)},ln.prototype._pulseNode=function(t,e,n,r){this._pulse(t,"".concat(e," > rect"),n,r),this._pulse(t,"".concat(e," > polygon"),n,r)},ln.prototype._pulseLink=function(t,e,n){var r=this.xdsms[this.rootId].graph,o=r.idxOf(e),i=r.idxOf(n);this._pulse(t,"path.link_".concat(o,"_").concat(i))},ln.prototype._onAnimationStart=function(t){ot("svg#".concat(this.rootId)).select("g.title").select("text").transition().delay(t).style("fill",an),ot("svg#".concat(this.rootId)).select("rect.border").transition().delay(t).style("stroke-width","5px").duration(200).transition().duration(1e3).style("stroke","black").style("stroke-width","0px")},ln.prototype._onAnimationDone=function(t){var e=this;ot("svg#".concat(this.rootId)).select("g.title").select("text").transition().delay(t).style("fill",null).on("end",(function(){e._updateStatus(ln.STATUS.DONE)}))},ln.prototype._isSubXdsm=function(t){var e="g.id".concat(t),n=ot("svg#".concat(this.rootId)).select(e);return n.classed("mdo")||n.classed("sub-optimization")||n.classed("group")||n.classed("implicit-group")},ln.prototype._scheduleAnimation=function(){var t=this,e=this,n=this.initialDelay,r=e.xdsms[e.rootId].graph;return e._onAnimationStart(n),r.nodesByStep.forEach((function(o,i,a){var s=[];o.forEach((function(t){var o=n+700*i;if(0<i){a[i-1].forEach((function(n){e._pulseLink(o,n,t)}));var u="g.id".concat(t);if(e._isSubXdsm(t)){e._pulseNode(o,u,"in");var c=r.getNode(t).getSubXdsmId(),l=new ln(e.xdsms,c,o+200)._scheduleAnimation();s.push(l),e._pulseNode(l+o+200,u,"out")}else e._pulseNode(o,u)}}),t),0<s.length&&(n+=Math.max.apply(null,s)),n+=200}),this),e._onAnimationDone(700*r.nodesByStep.length+n),700*r.nodesByStep.length},ln.prototype._reset=function(t){var e=ot("svg#".concat(this.rootId));t&&(e=it("svg")),e.selectAll("rect").transition().duration(0).style("stroke-width",null).style("stroke",null),e.selectAll("polygon").transition().duration(0).style("stroke-width",null).style("stroke",null),e.selectAll(".title > text").transition().duration(0).style("fill",null),e.selectAll(".node > rect").transition().duration(0).style("stroke-width",null).style("stroke",null).style("fill",null),e.selectAll(".node > polygon").transition().duration(0).style("stroke-width",null).style("stroke",null).style("fill",null),e.selectAll("path").transition().duration(0).style("stroke-width",null).style("stroke",null).style("fill",null)},ln.prototype._resetPreviousStep=function(){var t=this;this.root.graph.nodesByStep[this.curStep-1].forEach((function(e){var n="g.id".concat(e);t._pulseNode(0,n,"out")}),this)},ln.prototype._subAnimationInProgress=function(){var t=!1;for(var e in this.subAnimations)Object.prototype.hasOwnProperty.call(this.subAnimations,e)&&(t=t||this.subAnimations[e].running());return t};var fn=ln;function pn(t,e){var n=this;this.animation=t,this.defaultVersion=e||Qe;var r=ot(".xdsm-toolbar").append("div").classed("button_group",!0);r.append("button").attr("id","start").append("i").attr("class","icon-start"),r.append("button").attr("id","stop").append("i").attr("class","icon-stop"),r.append("button").attr("id","step-prev").append("i").attr("class","icon-step-prev"),r.append("button").attr("id","step-next").append("i").attr("class","icon-step-next"),r.append("label").text("XDSM").attr("id","xdsm-version-label"),r.append("select").attr("id","xdsm-version-toggle"),this.startButton=ot("button#start"),this.stopButton=ot("button#stop"),this.stepPrevButton=ot("button#step-prev"),this.stepNextButton=ot("button#step-next"),this.toggleVersionButton=ot("select#xdsm-version-toggle");var o={v1:Ze,v2:Qe};this.toggleVersionButton.selectAll("versions").data(["v1","v2"]).enter().append("option").text((function(t){return t})).attr("value",(function(t){return o[t]})).property("selected",(function(t){return e===o[t]})),this.startButton.on("click",(function(){n.animation.start()})),this.stopButton.on("click",(function(){n.animation.stop()})),this.stepPrevButton.on("click",(function(){n.animation.stepPrev()})),this.stepNextButton.on("click",(function(){n.animation.stepNext()})),this.toggleVersionButton.on("change",(function(){var t=ot("select#xdsm-version-toggle").property("value"),e=ot(".".concat(t));e.empty()&&t===Ze&&(e=ot(".".concat(Qe))).classed(Qe,!1).classed(Ze,!0),e.empty()&&t===Qe&&(e=ot(".".concat(Ze))).classed(Ze,!1).classed(Qe,!0),n.animation.setXdsmVersion(t)})),this.animation.addObserver(this),this.update(this.animation.status)}pn.prototype.update=function(t){switch(t){case fn.STATUS.STOPPED:case fn.STATUS.DONE:this.animation.reset();case fn.STATUS.READY:this._enable(this.startButton),this._disable(this.stopButton),this._enable(this.stepNextButton),this._enable(this.stepPrevButton);break;case fn.STATUS.RUNNING_AUTO:this._disable(this.startButton),this._enable(this.stopButton),this._disable(this.stepNextButton),this._disable(this.stepPrevButton);break;case fn.STATUS.RUNNING_STEP:this._disable(this.startButton),this._enable(this.stopButton),this._enable(this.stepNextButton),this._enable(this.stepPrevButton);break;default:console.log("Unexpected Event: ".concat(t))}},pn.prototype._enable=function(t){t.attr("disabled",null)},pn.prototype._disable=function(t){t.attr("disabled",!0)};var dn=pn;function hn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vn(t,e,n){return e&&mn(t.prototype,e),n&&mn(t,n),t}var bn=function(){function t(e,n,r){gn(this,t);var o=new st.a(e,r.withDefaultDriver);this.xdsm=new nn(o,"root",r),this.xdsm.draw(),this.selectable=new on(this.xdsm,n),this.selectable.enable()}return vn(t,[{key:"updateMdo",value:function(t){this.xdsm.updateMdo(t),this.selectable.enable()}},{key:"setSelection",value:function(t){this.selectable.setFilter(t)}}]),t}(),wn=function(){function t(e){gn(this,t),this._version=t._detectVersion()||Qe,this.default_config={labelizer:{ellipsis:5,subSupScript:!0,showLinkNbOnly:!1},withDefaultDriver:!0},this._config=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hn(Object(n),!0).forEach((function(e){yn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.default_config,{},e)}return vn(t,[{key:"createXdsm",value:function(t){var e=this,n=this._version,r=ot(".".concat(n));if(r.empty())console.log("No element of ".concat(n,' class. Please add <div class="').concat(n,'"></div> in your HTML.'));else if(t)this._createXdsm(t,n);else{var o=r.attr("data-mdo");if(o)this._createXdsm(JSON.parse(o),n);else{var i=r.attr("data-mdo-file")||"xdsm.json";fetch(i,void 0).then(m).then((function(t){return e._createXdsm(t,n)}))}}}},{key:"createSelectableXdsm",value:function(t,e){return new bn(t,e,this._config)}},{key:"_createXdsm",value:function(e,n){var r=this,o=t._orderedList(e);ot("body").selectAll("optpb").data(o).enter().append("div").filter((function(t){return e[t].optpb})).attr("class",(function(t){return"optpb ".concat(t)})).style("opacity",0).on("click",(function(){ot(this).transition().duration(500).style("opacity",0).style("pointer-events","none")})).append("pre").html((function(t){return e[t].optpb}));var i={};if(-1===o.indexOf("root")){var a=new st.a(e,this._config.withDefaultDriver);i.root=new nn(a,this._config),i.root.draw()}else o.forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){var n=new st.a(e[t],r._config.withDefaultDriver);i[t]=new nn(n,t,r._config),i[t].draw(),i[t].svg.select(".optimization").on("click",(function(){var e=ot(".optpb.".concat(t));e.style("opacity",.9),e.style("left","".concat(H.pageX,"px")).style("top","".concat(H.pageY-28,"px")),e.style("pointer-events","auto")}))}}),this);var s=new fn(i);i.root.hasWorkflow()&&new dn(s,n),s.renderNodeStatuses()}}],[{key:"_detectVersion",value:function(){return ot(".".concat(Ze)).empty()?Qe:Ze}},{key:"_orderedList",value:function(e,n,r){var o=n||"root",i=r||0;if(e[o]){var a=e[o].nodes.map((function(t){return t.subxdsm})).filter((function(t){return t})),s=[o];if(0<a.length)for(var u=0;u<a.length;u+=1)s=s.concat(t._orderedList(e,a[u],i+1));return s}if(0===i)return Object.keys(e).sort();throw new Error("sub-XDSM '".concat(o,"' not found among ").concat(Object.keys(e)))}},{key:"XDSM_V1",get:function(){return Ze}},{key:"XDSM_V2",get:function(){return Qe}}]),t}();e.a=wn},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(15),o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var i=Object.create(n(12));i.inherits=n(5);var a=n(26),s=n(24);i.inherits(f,a);for(var u=o(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";function r(t,e,n,r){var o;e in t&&("function"!=typeof(o=r)||"[object Function]"!==s.call(o)||!r())||(l?c(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)}function o(t,e){var n=2<arguments.length?arguments[2]:{},o=i(e);a&&(o=u.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)r(t,o[s],e[o[s]],n[o[s]])}var i=n(32),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,u=Array.prototype.concat,c=Object.defineProperty,l=c&&function(){var t={};try{for(var e in c(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}();o.supportsDescriptors=!!l,t.exports=o},,,function(t,e,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}((t.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var o,i,a,s;if(c(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),0<(o=l(t))&&a.length>o&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return o.listener=n,r.wrapFn=o}function d(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):y(o,o.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(0<e.length&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(void 0===u)return!1;if("function"==typeof u)i(u,this,e);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)i(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return f(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return f(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,o,i,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(23).Buffer)},function(t,e,n){"use strict";var r=n(69);t.exports=Function.prototype.bind||r},function(t,e,n){(function(e){var r=n(49);function o(t,n,o){t=t||function(t){this.queue(t)},n=n||function(){this.queue(null)};var i=!1,a=!1,s=[],u=!1,c=new r;function l(){for(;s.length&&!c.paused;){var t=s.shift();if(null===t)return c.emit("end");c.emit("data",t)}}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(o&&!1===o.autoDestroy),c.write=function(e){return t.call(this,e),!c.paused},c.queue=c.push=function(t){return u||(null===t&&(u=!0),s.push(t),l()),c},c.on("end",(function(){c.readable=!1,!c.writable&&c.autoDestroy&&e.nextTick((function(){c.destroy()}))})),c.end=function(t){if(!i)return i=!0,arguments.length&&c.write(t),c.writable=!1,n.call(c),!c.readable&&c.autoDestroy&&c.destroy(),c},c.destroy=function(){if(!a)return i=a=!0,s.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),l(),c.paused||c.emit("drain"),c},c}t.exports=o,o.through=o}).call(this,n(3))},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,o)}));default:for(i=new Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return e.nextTick((function(){t.apply(null,i)}))}}}:t.exports=e}).call(this,n(3))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(55),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(t,e,n){"use strict";var r=n(13),o=n(18)("%Function%"),i=o.apply,a=o.call;t.exports=function(){return r.apply(a,arguments)},t.exports.apply=function(){return r.apply(i,arguments)}},function(t,e,n){"use strict";var r,o=TypeError,i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch(t){i=null}function a(){throw new o}var s=i?function(){try{return a}catch(t){try{return i(arguments,"callee").get}catch(t){return a}}}():a,u=n(70)(),c=Object.getPrototypeOf||function(t){return t.__proto__},l=r,f="undefined"==typeof Uint8Array?r:c(Uint8Array),p={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":u?c([][Symbol.iterator]()):r,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":r,"%AsyncGenerator%":r,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":r,"%AsyncIteratorPrototype%":l&&u&&Symbol.asyncIterator?l[Symbol.asyncIterator]():r,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?r:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?r:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?r:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?r:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":r,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":r,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?r:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?r:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?r:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?c(c([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%JSONParse%":"object"==typeof JSON?JSON.parse:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?c((new Map)[Symbol.iterator]()):r,"%MapPrototype%":"undefined"==typeof Map?r:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%PromisePrototype%":"undefined"==typeof Promise?r:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?r:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?r:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?r:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?r:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?c((new Set)[Symbol.iterator]()):r,"%SetPrototype%":"undefined"==typeof Set?r:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":u?c(""[Symbol.iterator]()):r,"%StringPrototype%":String.prototype,"%Symbol%":u?Symbol:r,"%SymbolPrototype%":u?Symbol.prototype:r,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":f,"%TypedArrayPrototype%":f?f.prototype:r,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?r:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?r:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?r:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?r:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?r:WeakSet.prototype},d=n(13).call(Function.call,String.prototype.replace),h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,y=/\\(\\)?/g;t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n,r=(n=[],d(t,h,(function(t,e,r,o){n[n.length]=r?d(o,y,"$1"):e||t})),n),a=function(t,e){if(!(t in p))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===p[t]&&!e)throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!");return p[t]}("%"+(0<r.length?r[0]:"")+"%",e),s=1;s<r.length;s+=1)if(null!=a)if(i&&s+1>=r.length){var u=i(a,r[s]);if(!e&&!(r[s]in a))throw new o("base intrinsic for "+t+" exists, but the property is not available.");a=u?u.get||u.value:a[r[s]]}else a=a[r[s]];return a}},,function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},function(t,e,n){(((e=t.exports=n(26)).Stream=e).Readable=e).Writable=n(24),e.Duplex=n(7),e.Transform=n(31),e.PassThrough=n(58)},function(t,e,n){var r=n(23),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(50),o=n(51),i=n(27);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"!=typeof t)return c(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(e,n),o=(t=s(t,r)).write(e,n);return o!==r&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):p(t,e);if("Buffer"===e.type&&i(e.data))return p(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function h(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,o);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,o){var i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=a=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=n;i<s;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(s<n+u&&(n=s-u),i=n;0<=i;i--){for(var f=!0,p=0;p<u;p++)if(c(t,i+p)!==c(e,p)){f=!1;break}if(f)return i}return-1}function v(t,e,n,r){n=Number(n)||0;var o=t.length-n;(!r||o<(r=Number(r)))&&(r=o);var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return I(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return I(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function _(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,u,c=t[o],l=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&2047<(u=(15&c)<<12|(63&i)<<6|63&a)&&(u<55296||57343<u)&&(l=u);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)&&u<1114112&&(l=u)}null===l?(l=65533,f=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=E));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return r=null,i=e,a=n,l(o=t),o<=0||void 0===i?s(r,o):"string"==typeof a?s(r,o).fill(i,a):s(r,o).fill(i);var r,o,i,a},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?x(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=e)return 0;if(o<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),c=this.slice(r,o),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||o<n)&&(n=o),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,a,s,u,c=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return s=e,u=n,I(q(t,this.length-s),this,s,u);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return this,i=e,a=n,I(U(t),this,i,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(c)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),c=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function S(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function O(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var o="",i=e;i<n;++i)o+=C(t[i]);return o}function k(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function T(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function R(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,i){return i||R(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,i){return i||R(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;n=new u(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],o=1;0<e&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];0<r&&(o*=256);)i+=this[t+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);N(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);N(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;0<=--i&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;0<=o;--o)t[o+e]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(i=e;i<n;++i)this[i]=t;else{var a=u.isBuffer(t)?t:q(new u(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function C(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!o){if(56319<n){-1<(e-=3)&&i.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(e-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,n<128){if(--e<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function U(t){return r.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(6))},function(t,e,n){"use strict";(function(e,r,o){var i=n(15);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var o=r.callback;e.pendingcb--,o(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,u=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?r:i.nextTick;v.WritableState=m;var c=Object.create(n(12));c.inherits=n(5);var l,f={deprecate:n(56)},p=n(28),d=n(22).Buffer,h=o.Uint8Array||function(){},y=n(29);function g(){}function m(t,e){s=s||n(7),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var o=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,o=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,o){--e.pendingcb,n?(i.nextTick(o,r),i.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(o(r),t._writableState.errorEmitted=!0,t.emit("error",r),S(t,e))}(t,n,r,e,o);else{var a=x(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||_(t,n),r?u(w,t,n,a,o):w(t,n,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||n(7),!(l.call(v,this)||this instanceof s))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),p.call(this)}function b(t,e,n,r,o,i,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function w(t,e,n,r){var o,i;n||(o=t,0===(i=e).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),e.pendingcb--,r(),S(t,e)}function _(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),i=e.corkedRequestsFree;i.entry=n;for(var s=0,u=!0;n;)(o[s]=n).isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,b(t,e,!0,e.length,o,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(b(t,e,!1,e.objectMode?1:c.length,c,l,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)}))}function S(t,e){var n,r,o=x(e);return o&&(n=t,(r=e).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,i.nextTick(E,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),o}c.inherits(v,p),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:f.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===v&&t&&t._writableState instanceof m}})):l=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r,o,a,s,u,c,l,f,p,y=this._writableState,m=!1,v=!y.objectMode&&(r=t,d.isBuffer(r)||r instanceof h);return v&&!d.isBuffer(t)&&(o=t,t=d.from(o)),"function"==typeof e&&(n=e,e=null),e=v?"buffer":e||y.defaultEncoding,"function"!=typeof n&&(n=g),y.ended?(this,f=n,p=new Error("write after end"),this.emit("error",p),i.nextTick(f,p)):(v||(this,a=y,u=n,l=!(c=!0),null===(s=t)?l=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(l=new TypeError("Invalid non-string/buffer chunk")),l&&(this.emit("error",l),i.nextTick(u,l),c=!1),c))&&(y.pendingcb++,m=function(t,e,n,r,o,i){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,n)),e}(e,r,o);r!==a&&(n=!0,o="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,r,o,i);return u}(this,y,v,t,e,n)),m},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||_(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?i.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(3),n(16).setImmediate,n(6))},function(t,e,n){"use strict";var r=n(13);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";(function(e,r){var o=n(15);t.exports=b;var i,a=n(27);function s(t,e){return t.listeners(e).length}b.ReadableState=v,n(11).EventEmitter;var u=n(28),c=n(22).Buffer,l=e.Uint8Array||function(){},f=Object.create(n(12));f.inherits=n(5);var p=n(52),d=void 0;d=p&&p.debuglog?p.debuglog("stream"):function(){};var h,y=n(53),g=n(29);f.inherits(b,u);var m=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var r=e instanceof(i=i||n(7));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h=h||n(30).StringDecoder,this.decoder=new h(t.encoding),this.encoding=t.encoding)}function b(t){if(i=i||n(7),!(this instanceof b))return new b(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function w(t,e,n,r,o){var i,a,s,u=t._readableState;return null===e?(u.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}}(t,u)):(o||(i=function(t,e){var n;return function(t){return c.isBuffer(t)||t instanceof l}(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(u,e)),i?t.emit("error",i):u.objectMode||e&&0<e.length?("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===c.prototype||(a=e,e=c.from(a)),r?u.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):_(t,u,e,!0):u.ended?t.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!n?(e=u.decoder.write(e),u.objectMode||0!==e.length?_(t,u,e,!1):O(t,u)):_(t,u,e,!1))):r||(u.reading=!1)),!(s=u).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function _(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),O(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),w(this,t,e,!1,n)},b.prototype.unshift=function(t){return w(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return h=h||n(30).StringDecoder,this._readableState.decoder=new h(t),this._readableState.encoding=t,this};var x=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(x<=(n=t)?n=x:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(A,t):A(t))}function A(t){d("emit readable"),t.emit("readable"),T(t)}function O(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(k,t,e))}function k(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function P(t){d("readable nexttick read 0"),t.read(0)}function N(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function j(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():(n?function(t,e){var n=e.head,r=1,o=n.data;for(t-=o.length;n=n.next;){var i=n.data,a=t>i.length?i.length:t;if(a===i.length?o+=i:o+=i.slice(0,t),0==(t-=a)){a===i.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=i.slice(a);break}++r}return e.length-=r,o}:function(t,e){var n=c.allocUnsafe(t),r=e.head,o=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var i=r.data,a=t>i.length?i.length:t;if(i.copy(n,n.length-t,0,a),0==(t-=a)){a===i.length?(++o,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=i.slice(a);break}++o}return e.length-=o,n})(t,e),r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function B(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),(0===e.length&&e.ended?R:S)(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,o=e.needReadable;return d("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",o=!0),e.ended||e.reading?d("reading or ended",o=!1):o&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(n,e))),null===(r=0<t?j(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,d("pipe count=%d opts=%j",i.pipesCount,e);var u=e&&!1===e.end||t===r.stdout||t===r.stderr?b:c;function c(){d("onend"),t.end()}i.endEmitted?o.nextTick(u):n.once("end",u),t.on("unpipe",(function e(r,o){d("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,d("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",f),t.removeListener("error",g),t.removeListener("unpipe",e),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",y),p=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}));var l,f=(l=n,function(){var t=l._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(l,"data")&&(t.flowing=!0,T(l))});t.on("drain",f);var p=!1,h=!1;function y(e){d("ondata"),(h=!1)!==t.write(e)||h||((1===i.pipesCount&&i.pipes===t||1<i.pipesCount&&-1!==B(i.pipes,t))&&!p&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function g(e){d("onerror",e),b(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),b()}function v(){d("onfinish"),t.removeListener("close",m),b()}function b(){d("unpipe"),n.unpipe(t)}return n.on("data",y),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",m),t.once("finish",v),t.emit("pipe",n),i.flowing||(d("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=B(e.pipes,t);return-1===a||(e.pipes.splice(a,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},b.prototype.addListener=b.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):o.nextTick(P,this))}return n},b.prototype.resume=function(){var t,e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,this,(t=e).resumeScheduled||(t.resumeScheduled=!0,o.nextTick(N,this,t))),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",(function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(o){d("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))})),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var i=0;i<m.length;i++)t.on(m[i],this.emit.bind(this,m[i]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=j}).call(this,n(6),n(3))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(11).EventEmitter},function(t,e,n){"use strict";var r=n(15);function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(o,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(o,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(57).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(e.StringDecoder=i).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},i.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=a(e[r]);return 0<=o?(0<o&&(t.lastNeed=o-1),o):--r<n||-2===o?0:0<=(o=a(e[r]))?(0<o&&(t.lastNeed=o-2),o):--r<n||-2===o?0:0<=(o=a(e[r]))?(0<o&&(2===o?o=0:t.lastNeed=o-3),o):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=i;var r=n(7),o=Object.create(n(12));function i(t){if(!(this instanceof i))return new i(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),r(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){s(t,e,n)})):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}o.inherits=n(5),o.inherits(i,r),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){"use strict";var r=Array.prototype.slice,o=n(33),i=Object.keys,a=i?function(t){return i(t)}:n(66),s=Object.keys;a.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?s(r.call(t)):s(t)}):Object.keys=a,Object.keys||a},t.exports=a},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||"[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Function]"===r.call(t.callee)}},function(t,e,n){"use strict";function r(t){return t!=t}t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!r(t)||!r(e))}},function(t,e,n){"use strict";var r=n(34);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},function(t,e,n){"use strict";var r=n(25),o=RegExp.prototype.exec,i=Object.getOwnPropertyDescriptor,a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!s)return"[object RegExp]"===a.call(t);var e=i(t,"lastIndex");return!(!e||!r(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,o.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,n){"use strict";var r=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==r(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},function(t,e,n){"use strict";var r=n(37),o=n(8).supportsDescriptors,i=Object.getOwnPropertyDescriptor,a=TypeError;t.exports=function(){if(!o)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=i(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return r}},function(t,e,n){"use strict";var r=n(78),o=n(79),i=n(80)("String.prototype.replace"),a=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=o(r(this));return i(i(t,a,""),s,"")}},function(t,e,n){"use strict";var r=n(39);t.exports=function(){return String.prototype.trim&&""==="".trim()?String.prototype.trim:r}},function(t,e,n){var r="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&o&&"function"==typeof o.get?o.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"==typeof u.get?u.get:null,l=s&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d=Boolean.prototype.valueOf,h=Object.prototype.toString,y=String.prototype.match,g="function"==typeof BigInt?BigInt.prototype.valueOf:null,m=n(84).custom,v=m&&_(m)?m:null;function b(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function w(t){return"[object Array]"===S(t)}function _(t){return"[object Symbol]"===S(t)}t.exports=function t(e,n,r,o){var s,u=n||{};if(E(u,"quoteStyle")&&"single"!==u.quoteStyle&&"double"!==u.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return s=u,b(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,A),"single",s);if("number"==typeof e)return 0===e?0<1/0/e?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var h,m=void 0===u.depth?5:u.depth;if(void 0===r&&(r=0),m<=r&&0<m&&"object"==typeof e)return"[Object]";if(void 0===o)o=[];else if(0<=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}(o,e))return"[Circular]";function x(e,n){return n&&(o=o.slice()).push(n),t(e,u,r+1,o)}if("function"==typeof e){var T=function(t){if(t.name)return t.name;var e=y.call(t,/^function\s*([\w$]+)/);return e?e[1]:null}(e);return"[Function"+(T?": "+T:"")+"]"}if(_(e)){var j=Symbol.prototype.toString.call(e);return"object"==typeof e?O(j):j}if(function(t){if(t&&"object"==typeof t)return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement?1:"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var R="<"+String(e.nodeName).toLowerCase(),D=e.attributes||[],B=0;B<D.length;B++)R+=" "+D[B].name+"="+b((h=D[B].value,String(h).replace(/"/g,"&quot;")),"double",u);return R+=">",e.childNodes&&e.childNodes.length&&(R+="..."),R+"</"+String(e.nodeName).toLowerCase()+">"}if(w(e))return 0===e.length?"[]":"[ "+N(e,x).join(", ")+" ]";if("[object Error]"===S(e)){var M=N(e,x);return 0===M.length?"["+String(e)+"]":"{ ["+String(e)+"] "+M.join(", ")+" }"}if("object"==typeof e){if(v&&"function"==typeof e[v])return e[v]();if("function"==typeof e.inspect)return e.inspect()}if(function(t){if(i&&t&&"object"==typeof t)try{i.call(t);try{c.call(t)}catch(t){return 1}return t instanceof Map}catch(t){}}(e)){var C=[];return a.call(e,(function(t,n){C.push(x(n,e)+" => "+x(t,e))})),P("Map",i.call(e),C)}if(function(t){if(c&&t&&"object"==typeof t)try{c.call(t);try{i.call(t)}catch(t){return 1}return t instanceof Set}catch(t){}}(e)){var q=[];return l.call(e,(function(t){q.push(x(t,e))})),P("Set",c.call(e),q)}if(function(t){if(f&&t&&"object"==typeof t)try{f.call(t,f);try{p.call(t,p)}catch(t){return 1}return t instanceof WeakMap}catch(t){}}(e))return k("WeakMap");if(function(t){if(p&&t&&"object"==typeof t)try{p.call(t,p);try{f.call(t,f)}catch(t){return 1}return t instanceof WeakSet}catch(t){}}(e))return k("WeakSet");if("[object Number]"===S(e))return O(x(Number(e)));if("[object BigInt]"===S(e))return O(x(g.call(e)));if("[object Boolean]"===S(e))return O(d.call(e));if("[object String]"===S(e))return O(x(String(e)));if("[object Date]"===S(e)||"[object RegExp]"===S(e))return String(e);var U=N(e,x);return 0===U.length?"{}":"{ "+U.join(", ")+" }"};var x=Object.prototype.hasOwnProperty||function(t){return t in this};function E(t,e){return x.call(t,e)}function S(t){return h.call(t)}function A(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+e.toString(16)}function O(t){return"Object("+t+")"}function k(t){return t+" { ? }"}function P(t,e,n){return t+" ("+e+") {"+n.join(", ")+"}"}function N(t,e){var n=w(t),r=[];if(n){r.length=t.length;for(var o=0;o<t.length;o++)r[o]=E(t,o)?e(t[o],t):""}for(var i in t)E(t,i)&&(n&&String(Number(i))===i&&i<t.length||(/[^\w$]/.test(i)?r.push(e(i,t)+": "+e(t[i],t)):r.push(i+": "+e(t[i],t))));return r}},,,,,function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(0),i=n(4),a=n(47);function s(){return new o.a({nodes:[{id:"A"},{id:"B"},{id:"C"},{id:"D"},{id:"E"}],edges:[{from:"A",to:"B",name:"a, b"},{from:"C",to:"A",name:"CA"},{from:"C",to:"B",name:"CB"},{from:"C",to:"D",name:"CD"},{from:"E",to:"A",name:"EA"}],workflow:[]})}function u(){return new o.a({nodes:[{id:"A"},{id:"B"},{id:"C"},{id:"D"},{id:"E"}],edges:[{from:"A",to:"B",vars:{1:"a",2:"b"}},{from:"C",to:"A",vars:{1:"a",3:"c"}},{from:"C",to:"B",vars:{3:"c",2:"b"}},{from:"C",to:"D",vars:{3:"c",4:"d"}},{from:"E",to:"A",vars:{5:"e",1:"a"}}],workflow:[]})}a("Labelizer.strParse('') returns [{'base':'', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse(""),[{base:"",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('+A') throws an error",(function(t){t.throws((function(){r.a.strParse("+")}),"should throw an error"),t.end()})),a("Labelizer.strParse('ConvCheck') returns [{'base':'ConvCheck', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("ConvCheck"),[{base:"ConvCheck",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('x') returns [{'base':'x', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("x"),[{base:"x",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('&#x03BB') returns [{'base':'&#x03BB', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("&#x03BB"),[{base:"&#x03BB",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('&#x03BB_&#x03BB^&#x03BB') returns [{'base':'&#x03BB', 'sub':'&#x03BB', 'sup':'&#x03BB'}]",(function(t){t.deepEqual(r.a.strParse("&#x03BB_&#x03BB^&#x03BB"),[{base:"&#x03BB",sub:"&#x03BB",sup:"&#x03BB"}]),t.end()})),a("Labelizer.strParse('Optimization') returns [{'base':'Optimization', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("Optimization"),[{base:"Optimization",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('x_12') returns [{'base':'x', 'sub': '12', 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("x_12"),[{base:"x",sub:"12",sup:void 0}]),t.end()})),a("Labelizer.strParse('x_13^{(0)}') returns [{'base':'x', 'sub': '13', 'sup': '{(0)}'}]",(function(t){t.deepEqual(r.a.strParse("x_13^{(0)}"),[{base:"x",sub:"13",sup:"{(0)}"}]),t.end()})),a("Labelizer.strParse('x_13^0, y_1^{*}') returns [{'base': 'x', 'sub': '13', 'sup': '{*}'}, {'base':'y', 'sub': '1', 'sup': '*'}]",(function(t){t.deepEqual(r.a.strParse("x_13^{(0)}, y_1^{*}"),[{base:"x",sub:"13",sup:"{(0)}"},{base:"y",sub:"1",sup:"{*}"}]),t.end()})),a("Labelizer.strParse('1:Opt') returns [{'base':'1:Opt', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("1:Opt"),[{base:"1:Opt",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('1:L-BFGS-B') returns [{'base':'1:L-BFGS-B', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("1:L-BFGS-B"),[{base:"1:L-BFGS-B",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('y_12_y_34') returns [{'base':'y_12_y_34', 'sub':undefined, 'sup':undefined}]",(function(t){t.deepEqual(r.a.strParse("y_12_y_34"),[{base:"y_12_y_34",sub:void 0,sup:void 0}]),t.end()})),a("Labelizer.strParse('y_12_y_34^*') returns [{'base':'y_12_y_34', 'sub':undefined, 'sup':'*'}]",(function(t){t.deepEqual(r.a.strParse("y_12_y_34^*"),[{base:"y_12_y_34",sub:void 0,sup:"*"}]),t.end()})),a("Graph.expand(['a']) returns [['a']]",(function(t){t.deepEqual(o.a.expand(["a"]),[["a"]]),t.end()})),a("Graph.expand([['a']]) returns [['a']]",(function(t){t.deepEqual(o.a.expand([["a"]]),[["a"]]),t.end()})),a("Graph.expand(['a', 'b']) returns [['a', 'b']]",(function(t){t.deepEqual(o.a.expand(["a","b"]),[["a","b"]]),t.end()})),a("Graph.expand([['a', 'b']]) returns [['a', 'b']]",(function(t){t.deepEqual(o.a.expand([["a","b"]]),[["a","b"]]),t.end()})),a("Graph.expand(['a', ['b']]) returns [['a', 'b', 'a']]",(function(t){t.deepEqual(o.a.expand(["a",["b"]]),[["a","b","a"]]),t.end()})),a("Graph.expand([['a'], 'b']) returns ['a', 'b']",(function(t){t.deepEqual(o.a.expand([["a"],"b"]),[["a","b"]]),t.end()})),a("Graph.expand([['a'], 'b', 'c']) returns ['a', 'b', 'c']",(function(t){t.deepEqual(o.a.expand([["a"],"b","c"]),[["a","b","c"]]),t.end()})),a("Graph.expand(['a', ['b'], 'c']) returns [['a', 'b', 'a', 'c']]",(function(t){t.deepEqual(o.a.expand(["a",["b"],"c"]),[["a","b","a","c"]]),t.end()})),a("Graph.expand(['a', [['b']], 'c']) returns [['a', 'b', 'a', 'c']]",(function(t){t.deepEqual(o.a.expand(["a",[["b"]],"c"]),[["a","b","a","c"]]),t.end()})),a("Graph.expand(['a', [['b', [d]]], 'c']) returns [['a', 'b', 'd', 'b', 'a', 'c']]",(function(t){t.deepEqual(o.a.expand(["a",[["b",["d"]]],"c"]),[["a","b","d","b","a","c"]]),t.end()})),a("Graph.expand(['a', ['b1', 'b2'], 'c']) returns [['a', 'b1', 'b2', 'a', 'c']]",(function(t){t.deepEqual(o.a.expand(["a",["b1","b2"],"c"]),[["a","b1","b2","a","c"]]),t.end()})),a("Graph.expand(['a0', ['b1', 'b2', 'b3'], 'c3']) returns [['a0', 'b1', 'b2', 'b3', 'a0', 'c3']]",(function(t){t.deepEqual(o.a.expand(["a0",["b1","b2","b3"],"c3"]),[["a0","b1","b2","b3","a0","c3"]]),t.end()})),a("Graph.expand(['opt', ['mda', ['d1', 'd2', 'd3'],'func']]) returns [['opt', 'mda', 'd1', 'd2', 'd3', 'mda','func', 'opt']]",(function(t){t.deepEqual(o.a.expand(["opt",["mda",["d1","d2","d3"],"func"]]),[["opt","mda","d1","d2","d3","mda","func","opt"]]),t.end()})),a("Graph.expand([{parallel: ['d1', 'd2']}]) returns [[d1], [d2]]",(function(t){t.deepEqual(o.a.expand([{parallel:["d1","d2"]}]),[["d1"],["d2"]]),t.end()})),a("Graph.expand([{parallel: ['d1', 'd2']}]) returns [[d1], [d2]]",(function(t){t.deepEqual(o.a.expand([{parallel:["d1","d2"]}]),[["d1"],["d2"]]),t.end()})),a("Graph.expand(['opt', {parallel: ['d1', 'd2', 'd3']}]) returns [['opt', 'd1'], ['opt', 'd2'], ['opt', 'd3']]",(function(t){t.deepEqual(o.a.expand(["opt",{parallel:["d1","d2","d3"]}]),[["opt","d1"],["opt","d2"],["opt","d3"]]),t.end()})),a("Graph.expand(['opt', [{parallel: ['d1', 'd2', 'd3']}]]) returns [['opt', 'd1', 'opt'], ['opt', 'd2', 'opt'], ['opt', 'd3', 'opt']]",(function(t){t.deepEqual(o.a.expand(["opt",[{parallel:["d1","d2","d3"]}]]),[["opt","d1","opt"],["opt","d2","opt"],["opt","d3","opt"]]),t.end()})),a("Graph.expand(['mda', {parallel: ['d1', 'd2', 'd3']}, 'd4']) returns [['mda', 'd1', 'd4'], ['mda', 'd2', 'd4'], ['mda', 'd3', 'd4']]",(function(t){t.deepEqual(o.a.expand(["mda",{parallel:["d1","d2","d3"]},"d4"]),[["mda","d1","d4"],["mda","d2","d4"],["mda","d3","d4"]]),t.end()})),a("Graph.expand(['opt', 'mda', {parallel: ['d1', 'd2', 'd3']}, 'd4']]) returns [['opt', 'mda'], ['mda', 'd1', 'd4'], ['mda', 'd2', 'd4'], ['mda', 'd3', 'd4']]",(function(t){t.deepEqual(o.a.expand(["opt","mda",{parallel:["d1","d2","d3"]},"d4"]),[["opt","mda"],["mda","d1","d4"],["mda","d2","d4"],["mda","d3","d4"]]),t.end()})),a("Graph.expand(['opt', ['mda', {parallel: ['d1', 'd2', 'd3']}, 'd4']]) returns [['opt', 'mda'], ['mda', 'd1', 'd4'], ['mda', 'd2', 'd4'], ['mda', 'd3', 'd4'], ['d4', 'opt']]",(function(t){t.deepEqual(o.a.expand(["opt",["mda",{parallel:["d1","d2","d3"]},"d4"]]),[["opt","mda"],["mda","d1","d4"],["mda","d2","d4"],["mda","d3","d4"],["d4","opt"]]),t.end()})),a("Graph.expand((['_U_', ['opt', ['mda', {parallel: ['d1', 'd2', 'd3']}, 'd4']]]) returns [['_U_', 'opt', 'mda'], ['mda', 'd1', 'd4'], ['mda', 'd2', 'd4'], ['mda', 'd3', 'd4'], ['d4', 'opt', '_U_']]",(function(t){t.deepEqual(o.a.expand(["_U_",["opt",["mda",{parallel:["d1","d2","d3"]},"d4"]]]),[["_U_","opt","mda"],["mda","d1","d4"],["mda","d2","d4"],["mda","d3","d4"],["d4","opt","_U_"]]),t.end()})),a("Graph.expand((['_U_', ['opt', ['mda', ['d1', 'd2']]]]) returns [['_U_', 'opt', 'mda', 'd1', 'd2', 'mda', 'opt', '_U_']]",(function(t){t.deepEqual(o.a.expand(["_U_",["opt",["mda",["d1","d2"]]]]),[["_U_","opt","mda","d1","d2","mda","opt","_U_"]]),t.end()})),a("Graph.expand((['_U_', ['opt', ['mda', ['d1', 'd2'], 'mda', ['d1', 'd2']]]]) returns [['_U_', 'opt', 'mda', 'd1', 'd2', 'mda', 'mda', 'd1', 'd2', 'mda', 'opt', '_U_']]",(function(t){t.deepEqual(o.a.expand(["_U_",["opt",["mda",["d1","d2"],"mda",["d1","d2"]]]]),[["_U_","opt","mda","d1","d2","mda","mda","d1","d2","mda","opt","_U_"]]),t.end()})),a("Graph.expand((['_U_', ['opt', ['mda', ['d1', 'd2'], {parallel: ['sc1', 'sc2']},'mda', ['d1', 'd2']]]]) returns [['_U_', 'opt', 'mda', 'd1', 'd2', 'mda'], ['mda', 'sc1', 'mda'], ['mda', 'sc2', 'mda'], ['mda', 'd1', 'd2', 'mda', 'opt', '_U_']]",(function(t){t.deepEqual(o.a.expand(["_U_",["opt",["mda",["d1","d2"],{parallel:["sc1","sc2"]},"mda",["d1","d2"]]]]),[["_U_","opt","mda","d1","d2","mda"],["mda","sc1","mda"],["mda","sc2","mda"],["mda","d1","d2","mda","opt","_U_"]]),t.end()})),a("Graph.expand((['d1', {parallel: ['sc1', 'sc2']}, 'd2']) returns [['d1', 'sc1', 'd2'], ['d1', 'sc2', 'd2']]",(function(t){t.deepEqual(o.a.expand(["d1",{parallel:["sc1","sc2"]},"d2"]),[["d1","sc1","d2"],["d1","sc2","d2"]]),t.end()})),a("Graph.expand((['opt', ['d1', {parallel: ['sc1', 'sc2']}]]) returns [['opt', 'd1'] ['d1', 'sc1', 'opt'], ['d1', 'sc2', 'opt']]",(function(t){t.deepEqual(o.a.expand(["opt",["d1",{parallel:["sc1","sc2"]}]]),[["opt","d1"],["d1","sc1","opt"],["d1","sc2","opt"],["opt","opt"]]),t.end()})),a("Graph.chains should expand as list of index couples",(function(t){var e=new o.a({nodes:[{id:"Opt",name:"Opt"},{id:"MDA",name:"MDA"},{id:"DA1",name:"DA1"},{id:"DA2",name:"DA2"},{id:"DA3",name:"DA3"},{id:"Func",name:"Func"}],edges:[],workflow:["Opt",["MDA",["DA1","DA2","DA3"],"Func"]]});t.deepEqual(e.chains,[[[1,2],[2,3],[3,4],[4,5],[5,2],[2,6],[6,1]]]),t.end()})),a("Graph.chains should expand as list of index couples",(function(t){var e=new o.a({nodes:[{id:"Opt",name:"Opt"},{id:"DA1",name:"DA1"},{id:"DA2",name:"DA2"},{id:"DA3",name:"DA3"},{id:"Func",name:"Func"}],edges:[],workflow:[["Opt",["DA1"],"Opt",["DA2"],"Opt",["DA3"],"Func"]]});t.deepEqual(e.chains,[[[1,2],[2,1],[1,3],[3,1],[1,4],[4,1],[1,5]]]),t.end()})),a("Graph.number(['d1']) returns {'toNum':{d1: '0'}, 'toNodes':[['d1']])",(function(t){t.deepEqual(o.a.number(["d1"]),{toNum:{d1:"0"},toNode:[["d1"]]}),t.equal(o.a.number(["d1"]).toNode.length,1),t.end()})),a("Graph.number(['d1', 'd1']) returns {'toNum':{d1: '0,1'}, 'toNodes':[['d1'],['d1']]})",(function(t){t.deepEqual(o.a.number(["d1","d1"]),{toNum:{d1:"0,1"},toNode:[["d1"],["d1"]]}),t.end()})),a("Graph.number(['mda', 'd1']) returns {'toNum':{mda:'0', d1: '1'}, 'toNode':[['mda'], ['d1']]})",(function(t){t.deepEqual(o.a.number(["mda","d1"]),{toNum:{mda:"0",d1:"1"},toNode:[["mda"],["d1"]]}),t.end()})),a("Graph.number(['mda', 'd1', 'd2', 'd3']) returns {mda: '0', d1: '1', d2: '2', d3: '3'})",(function(t){t.deepEqual(o.a.number(["mda","d1","d2","d3"]).toNum,{mda:"0",d1:"1",d2:"2",d3:"3"}),t.end()})),a("Graph.number(['mda', ['d1', 'd2', 'd3']]) returns {mda: '0,4-1', d1: '1', d2: '2', d3: '3'} )",(function(t){t.deepEqual(o.a.number(["mda",["d1","d2","d3"]]).toNum,{mda:"0,4-1",d1:"1",d2:"2",d3:"3"}),t.end()})),a("Graph.number(['mda', {parallel:['d1', 'd2', 'd3']}]) returns {'mda': '0', 'd1': '1', 'd2': '1', 'd3': '1'})",(function(t){t.deepEqual(o.a.number(["mda",{parallel:["d1","d2","d3"]}]).toNum,{mda:"0",d1:"1",d2:"1",d3:"1"}),t.end()})),a("Graph.number(['mda', [{parallel:['d1', 'd2', 'd3']}]]) returns {'toNum':{'mda': '0,2-1', 'd1': '1', 'd2': '1', 'd3': '1'}, 'toNode':[['mda'], ['d1','d2','d3']]})",(function(t){t.deepEqual(o.a.number(["mda",[{parallel:["d1","d2","d3"]}]]).toNum,{mda:"0,2-1",d1:"1",d2:"1",d3:"1"}),t.deepEqual(o.a.number(["mda",[{parallel:["d1","d2","d3"]}]]).toNode,[["mda"],["d1","d2","d3"],["mda"]]),t.end()})),a("Graph.number(['opt', 'mda', ['d1', 'd2', 'd3']]) returns {'opt': '0', 'mda': '1,5-2', 'd1': '2', 'd2': '3', 'd3': '4'})",(function(t){t.deepEqual(o.a.number(["opt","mda",["d1","d2","d3"]]).toNum,{opt:"0",mda:"1,5-2",d1:"2",d2:"3",d3:"4"}),t.end()})),a("Graph.number([['opt', ['mda', ['d1', 'd2', 'd3']]], 'd4']) returns {'opt': '0,6-1', 'mda': '1,5-2', 'd1': '2', 'd2': '3', 'd3': '4', 'd4': '7'})",(function(t){t.deepEqual(o.a.number([["opt",["mda",["d1","d2","d3"]]],"d4"]).toNum,{opt:"0,6-1",mda:"1,5-2",d1:"2",d2:"3",d3:"4",d4:"7"}),t.end()})),a("Graph.number([['Opt', ['mda', ['d1'], 's1']]]) returns {'Opt': '0,5-1', 'mda': '1,3-2', 'd1': '2', 's1': '4'})",(function(t){t.deepEqual(o.a.number([["Opt",["mda",["d1"],"s1"]]]).toNum,{Opt:"0,5-1",mda:"1,3-2",d1:"2",s1:"4"}),t.end()})),a("Graph.findEdgesOf(nodeIdx) returns edges to remove and edges to delete in case of node removal",(function(t){var e=s();t.deepEqual(e.findEdgesOf(1),{toRemove:[e.edges[0],e.edges[1],e.edges[4]],toShift:[e.edges[2],e.edges[3]]}),t.deepEqual(e.findEdgesOf(3),{toRemove:[e.edges[1],e.edges[2],e.edges[3]],toShift:[e.edges[4]]}),t.deepEqual(e.findEdgesOf(4),{toRemove:[e.edges[3]],toShift:[e.edges[4]]}),t.end()})),a("Graph.addNode()",(function(t){var e=s();t.equal(e.nodes.length,6),e.addNode({id:"F",name:"F",kind:"function"}),t.equal(e.nodes.length,7),t.end()})),a("Graph.removeNode()",(function(t){var e=s();t.equal(e.nodes.length,6),e.removeNode(4),t.equal(e.nodes.length,5),t.end()})),a("Graph.getNode()",(function(t){var e=s();t.equal(e.getNode("A"),e.nodes[1]),t.equal(e.getNode("E"),e.nodes[5]),t.end()})),a("Graph.idxOf()",(function(t){var e=s();t.equal(e.idxOf("B"),2),t.equal(e.idxOf("E"),5),t.end()})),a("Graph constructor should create a graph without edges or workflow input data)",(function(t){var e=new o.a({nodes:[{id:"A"},{id:"B"}]});t.deepEqual(e.edges,[]),t.deepEqual(e.chains,[]),t.end()})),a("Graph nodes have a status UNKNOWN by default",(function(t){var e=new o.a({nodes:[{id:"A"},{id:"B"}]});t.deepEqual(e.getNode("A").status,o.a.NODE_STATUS.UNKNOWN),t.end()})),a("Graph nodes can be to a given status PENDING, RUNNING, DONE or FAILED",(function(t){var e=new o.a({nodes:[{id:"A",status:"PENDING"},{id:"B",status:"RUNNING"},{id:"C",status:"DONE"},{id:"D",status:"FAILED"}]});t.deepEqual(e.getNode("A").status,o.a.NODE_STATUS.PENDING),t.deepEqual(e.getNode("B").status,o.a.NODE_STATUS.RUNNING),t.deepEqual(e.getNode("C").status,o.a.NODE_STATUS.DONE),t.deepEqual(e.getNode("D").status,o.a.NODE_STATUS.FAILED),t.end()})),a("Graph throws an error if a node status string not known",(function(t){t.throws((function(){new o.a({nodes:[{id:"A",status:"BADSTATUS"}]})}),"should throw an error"),t.end()})),a("Graph edge can have vars infos id/names from name",(function(t){var e=s().findEdge("A","B");t.deepEqual(e.element.vars,{0:"a",1:"b"}),t.end()})),a("Graph edge can have vars infos id/names",(function(t){var e=u();t.equal(e.getNode("E"),e.nodes[5]);var n=e.findEdge("C","D").element;t.equal(n.vars[3],"c"),t.equal(n.vars[4],"d"),t.deepEqual(n.vars,{3:"c",4:"d"}),t.equal(n.name,"c, d"),t.end()})),a("Graph add new var between two given nodes not linked",(function(t){var e=u();e.addEdgeVar("A","D",{4:"d"});var n=e.findEdge("A","D").element;t.equal(n.vars[4],"d"),t.deepEqual(n.vars,{4:"d"}),t.equal(n.name,"d"),t.end()})),a("Graph a var should appear once even if added twice",(function(t){var e=u();e.addEdgeVar("A","D",{4:"d"}),e.addEdgeVar("A","D",{4:"d"});var n=e.findEdge("A","D").element;t.equal(n.name,"d"),e.removeEdge("A","D"),e.findEdge("A","D").index,t.equal(n.index,void 0),t.end()})),a("Graph add new var between two given nodes already linked",(function(t){var e=u();e.addEdgeVar("A","B",{4:"d"});var n=e.findEdge("A","B").element;t.deepEqual(n.vars,{1:"a",2:"b",4:"d"}),t.equal(n.name,"a, b, d"),t.end()})),a("Remove var of an edge",(function(t){var e=u().findEdge("A","B").element;e.removeVar("b"),t.equal(e.name,"a"),t.end()})),a("Remove edge between two given nodes",(function(t){var e=u(),n=e.findEdge("E","A").element;t.notEqual(n,void 0),e.removeEdge("E","A"),n=e.findEdge("E","A").element,t.equal(n,void 0),t.end()})),a("Remove edge one var between two given nodes",(function(t){var e=u(),n=e.findEdge("E","A").element;t.notEqual(n,void 0),e.removeEdgeVar("E","A","e"),n=e.findEdge("E","A").element,t.deepEqual(n.vars,{1:"a"}),t.end()})),a("Remove edge all vars between two given nodes",(function(t){var e=u(),n=e.findEdge("E","A").element;t.notEqual(n,void 0),e.removeEdgeVar("E","A","e"),e.removeEdgeVar("E","A","a"),n=e.findEdge("E","A").element,t.equal(n,void 0),t.end()})),a("find XDSMs order list",(function(t){t.deepEqual(i.a._orderedList({C:{nodes:[]},B:{nodes:[]},root:{nodes:[{name:"a",subxdsm:"A"}]},A:{nodes:[{name:"c",subxdsm:"C"},{name:"b",subxdsm:"B"}]}},"root"),["root","A","C","B"]),t.end()})),a("find XDSMs list of single",(function(t){t.deepEqual(i.a._orderedList({root:{nodes:[{name:"a",subxdsm:"A"}]},A:{nodes:[{name:"c"},{name:"b"}]}}),["root","A"]),t.end()})),a("find XDSMs list of empty xdsms",(function(t){t.deepEqual(i.a._orderedList({root:{nodes:[]}}),["root"]),t.end()}))},function(t,e,n){(function(r){var o,i=n(20),a=n(48),s=n(64),u=n(85),c=n(14),l=void 0!==r&&r&&"function"==typeof r.on&&!0!==r.browser,f=void 0!==r&&r&&"function"==typeof r.exit;function p(){return d().apply(this,arguments)}function d(t){return(t=t||{}).autoclose=!l,o=o||function(t){var e=h({autoclose:i((t=t||{}).autoclose,!1)}),n=e.createStream({objectMode:t.objectMode}),o=n.pipe(t.stream||a());l&&o.on("error",(function(t){e._exitCode=1}));var s=!1;return n.on("end",(function(){s=!0})),!1===t.exit||l&&f&&r.on("exit",(function(t){if(0===t){if(!s)for(var n=e._results._only,o=0;o<e._tests.length;o++){var i=e._tests[o];n&&i!==n||i._exit()}e.close(),r.exit(t||e._exitCode)}})),e}(t)}function h(t){t=t||{};var e=u();!1!==t.autoclose&&e.once("done",(function(){e.close()}));var n=function(t,r,o){var i=new s(t,r,o);return n._tests.push(i),function t(e){e.on("test",(function(e){t(e)})),e.on("result",(function(t){t.todo||t.ok||"string"==typeof t||(n._exitCode=1)}))}(i),e.push(i),i};n._results=e,n._tests=[],n.createStream=function(t){return e.createStream(t)},n.onFinish=function(t){e.on("done",t)};var r=!(n.onFailure=function(t){e.on("fail",t)});return n.only=function(){if(r)throw new Error("there can only be one only test");r=!0;var t=n.apply(null,arguments);return e.only(t),t},n._exitCode=0,n.close=function(){e.close()},n}(e=t.exports=(p.only=function(){return d().only.apply(this,arguments)},p.createStream=function(t){if(t=t||{},o)return o.createStream(t);var e=c();return d({stream:e,objectMode:t.objectMode}),e},p.onFinish=function(){return d().onFinish.apply(this,arguments)},p.onFailure=function(){return d().onFailure.apply(this,arguments)},p.getHarness=d,p)).createHarness=h,e.Test=s,(e.test=e).test.skip=s.skip}).call(this,n(3))},function(t,e,n){(function(e){var r=n(14),o=n(63);t.exports=function(){var t="",n=r((function(e){for(var n=0;n<e.length;n++){var r="string"==typeof e?e.charAt(n):String.fromCharCode(e[n]);"\n"===r?i():t+=r}}),i);return n;function i(){if(o.writeSync&&/^win/.test(e.platform))try{o.writeSync(1,t+"\n")}catch(t){n.emit("error",t)}else try{console.log(t)}catch(t){n.emit("error",t)}t=""}}}).call(this,n(3))},function(t,e,n){t.exports=o;var r=n(11).EventEmitter;function o(){r.call(this)}n(5)(o,r),o.Readable=n(21),o.Writable=n(59),o.Duplex=n(60),o.Transform=n(61),o.PassThrough=n(62),(o.Stream=o).prototype.pipe=function(t,e){var n=this;function o(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",o),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",o),t.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new i(function(t,e){return 3*(t+e)/4-e}(a,s)),l=0,f=0<s?a-4:a;for(n=0;n<f;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(l(t,a,s<a+16383?s:a+16383));return 1==o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2==o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?o-1:0,p=n?-1:1,d=t[e+f];for(f+=p,i=d&(1<<-l)-1,d>>=-l,l+=s;0<l;i=256*i+t[e+f],f+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;0<l;a=256*a+t[e+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=c}return(d?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,h=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+f?p/u:p*Math.pow(2,1-f))*u&&(a++,u/=2),l<=a+f?(s=0,a=l):1<=a+f?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));8<=o;t[n+d]=255&s,d+=h,s/=256,o-=8);for(a=a<<o|s,c+=o;0<c;t[n+d]=255&a,d+=h,a/=256,c-=8);t[n+d-h]|=128*y}},function(t,e){},function(t,e,n){"use strict";var r=n(22).Buffer,o=n(54);function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}t.exports=(i.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,o=r.allocUnsafe(t>>>0),i=this.head,a=0;i;)e=o,n=a,i.data.copy(e,n),a+=i.data.length,i=i.next;return o},i),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,s=1,u={},c=!1,l=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,r="[object process]"==={}.toString.call(t.process)?function(t){e.nextTick((function(){d(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",h,!1):t.attachEvent("onmessage",h),function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(t){i.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,function(t){var e=l.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):function(t){setTimeout(d,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[s]=o,r(s),s++},f.clearImmediate=p}function p(t){delete u[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),c=!1}}}}function h(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(6),n(3))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return}catch(t){return}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(6))},function(t,e,n){var r=n(23),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),a.prototype=Object.create(o.prototype),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=i;var r=n(31),o=Object.create(n(12));function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}o.inherits=n(5),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(24)},function(t,e,n){t.exports=n(7)},function(t,e,n){t.exports=n(21).Transform},function(t,e,n){t.exports=n(21).PassThrough},function(t,e){},function(t,e,n){(function(e,r,o){var i=n(65),a=n(20),s=n(76),u=n(5),c=n(11).EventEmitter,l=n(25),f=n(36),p=n(77),d=n(13),h=n(82),y=n(41),g=d.call(Function.call,Object.prototype.propertyIsEnumerable),m=d.call(Function.call,String.prototype.toLowerCase),v=d.call(Function.call,RegExp.prototype.test);t.exports=E;var b=void 0!==e?e:r.nextTick,w=setTimeout,_=clearTimeout;u(E,c);var x=function(t,e,n){for(var r,o="(anonymous)",i={},a=0;a<arguments.length;a++){var s=arguments[a],u=typeof s;"string"==u?o=s:"object"==u?i=s||i:"function"==u&&(r=s)}return{name:o,opts:i,cb:r}};function E(t,e,n){if(!(this instanceof E))return new E(t,e,n);var o=x(t,e,n);this.readable=!0,this.name=o.name||"(anonymous)",this.assertCount=0,this.pendingCount=0,this._skip=o.opts.skip||!1,this._todo=o.opts.todo||!1,this._timeout=o.opts.timeout,this._plan=void 0,this._cb=o.cb,this._progeny=[],this._ok=!0;var i=r.env.NODE_TAPE_OBJECT_PRINT_DEPTH;for(var a in o.opts.objectPrintDepth?this._objectPrintDepth=o.opts.objectPrintDepth:i?"infinity"===m(i)?this._objectPrintDepth=1/0:this._objectPrintDepth=i:this._objectPrintDepth=5,this)this[a]=function(t,e){return"function"==typeof e?function(){return e.apply(t,arguments)}:e}(this,this[a])}E.prototype.run=function(){if(this.emit("prerun"),!this._cb||this._skip)return this._end();null!=this._timeout&&this.timeoutAfter(this._timeout),this._cb(this),this.emit("run")},E.prototype.test=function(t,e,n){var r=this,o=new E(t,e,n);this._progeny.push(o),this.pendingCount++,this.emit("test",o),o.on("prerun",(function(){r.assertCount++})),r._pendingAsserts()||b((function(){r._end()})),b((function(){r._plan||r.pendingCount!=r._progeny.length||r._end()}))},E.prototype.comment=function(t){var e=this;h(p(t).split("\n"),(function(t){e.emit("result",p(t).replace(/^#\s*/,""))}))},E.prototype.plan=function(t){this._plan=t,this.emit("plan",t)},E.prototype.timeoutAfter=function(t){if(!t)throw new Error("timeoutAfter requires a timespan");var e=this,n=w((function(){e.fail("test timed out after "+t+"ms"),e.end()}),t);this.once("end",(function(){_(n)}))},E.prototype.end=function(t){1<=arguments.length&&t&&this.ifError(t),this.calledEnd&&this.fail(".end() called twice"),this.calledEnd=!0,this._end()},E.prototype._end=function(t){var e=this;if(this._progeny.length){var n=this._progeny.shift();return n.on("end",(function(){e._end()})),void n.run()}this.ended||this.emit("end");var r=this._pendingAsserts();!this._planError&&void 0!==this._plan&&r&&(this._planError=!0,this.fail("plan != count",{expected:this._plan,actual:this.assertCount})),this.ended=!0},E.prototype._exit=function(){void 0===this._plan||this._planError||this.assertCount===this._plan?this.ended||this.fail("test exited without ending: "+this.name,{exiting:!0}):(this._planError=!0,this.fail("plan != count",{expected:this._plan,actual:this.assertCount,exiting:!0}))},E.prototype._pendingAsserts=function(){return void 0===this._plan?1:this._plan-(this._progeny.length+this.assertCount)},E.prototype._assert=function(t,e){var n=this,i=e.extra||{};t=!!t||!!i.skip;var u={id:n.assertCount++,ok:t,skip:a(i.skip,e.skip),todo:a(i.todo,e.todo,n._todo),name:a(i.message,e.message,"(unnamed assert)"),operator:a(i.operator,e.operator),objectPrintDepth:n._objectPrintDepth};if((l(e,"actual")||l(i,"actual"))&&(u.actual=a(i.actual,e.actual)),(l(e,"expected")||l(i,"expected"))&&(u.expected=a(i.expected,e.expected)),this._ok=!(!this._ok||!t),t||u.todo||(u.error=a(i.error,e.error,new Error(u.name))),!t)for(var c=(new Error("exception").stack||"").split("\n"),f=o+s.sep,p=0;p<c.length;p++){var d=c[p].replace(r.cwd(),"/$CWD").replace(o,"/$TEST"),h=/^(?:[^\s]*\s*\bat\s+)(?:(.*)\s+\()?((?:\/|[a-zA-Z]:\\)[^:\)]+:(\d+)(?::(\d+))?)\)$/.exec(d);if(h){var y=h[1]||"<anonymous>",g=h[2].replace("/$CWD",r.cwd()).replace("/$TEST",o);if(g.slice(0,f.length)!==f){u.functionName=y.split(/\s+/)[0],u.file=g,u.line=Number(h[3]),h[4]&&(u.column=Number(h[4])),u.at=y+" ("+g+")";break}}}n.emit("result",u);var m=n._pendingAsserts();m||(i.exiting?n._end():b((function(){n._end()}))),!n._planError&&m<0&&(n._planError=!0,n.fail("plan != count",{expected:n._plan,actual:n._plan-m}))},E.prototype.fail=function(t,e){this._assert(!1,{message:t,operator:"fail",extra:e})},E.prototype.pass=function(t,e){this._assert(!0,{message:t,operator:"pass",extra:e})},E.prototype.skip=function(t,e){this._assert(!0,{message:t,operator:"skip",skip:!0,extra:e})},E.prototype.ok=E.prototype.true=E.prototype.assert=function(t,e,n){this._assert(t,{message:a(e,"should be truthy"),operator:"ok",expected:!0,actual:t,extra:n})},E.prototype.notOk=E.prototype.false=E.prototype.notok=function(t,e,n){this._assert(!t,{message:a(e,"should be falsy"),operator:"notOk",expected:!1,actual:t,extra:n})},E.prototype.error=E.prototype.ifError=E.prototype.ifErr=E.prototype.iferror=function(t,e,n){this._assert(!t,{message:a(e,String(t)),operator:"error",actual:t,extra:n})},E.prototype.equal=E.prototype.equals=E.prototype.isEqual=E.prototype.is=E.prototype.strictEqual=E.prototype.strictEquals=function(t,e,n,r){this._assert(t===e,{message:a(n,"should be equal"),operator:"equal",actual:t,expected:e,extra:r})},E.prototype.notEqual=E.prototype.notEquals=E.prototype.notStrictEqual=E.prototype.notStrictEquals=E.prototype.isNotEqual=E.prototype.isNot=E.prototype.not=E.prototype.doesNotEqual=E.prototype.isInequal=function(t,e,n,r){this._assert(t!==e,{message:a(n,"should not be equal"),operator:"notEqual",actual:t,expected:e,extra:r})},E.prototype.deepEqual=E.prototype.deepEquals=E.prototype.isEquivalent=E.prototype.same=function(t,e,n,r){this._assert(i(t,e,{strict:!0}),{message:a(n,"should be equivalent"),operator:"deepEqual",actual:t,expected:e,extra:r})},E.prototype.deepLooseEqual=E.prototype.looseEqual=E.prototype.looseEquals=function(t,e,n,r){this._assert(i(t,e),{message:a(n,"should be equivalent"),operator:"deepLooseEqual",actual:t,expected:e,extra:r})},E.prototype.notDeepEqual=E.prototype.notDeepEquals=E.prototype.notEquivalent=E.prototype.notDeeply=E.prototype.notSame=E.prototype.isNotDeepEqual=E.prototype.isNotDeeply=E.prototype.isNotEquivalent=E.prototype.isInequivalent=function(t,e,n,r){this._assert(!i(t,e,{strict:!0}),{message:a(n,"should not be equivalent"),operator:"notDeepEqual",actual:t,expected:e,extra:r})},E.prototype.notDeepLooseEqual=E.prototype.notLooseEqual=E.prototype.notLooseEquals=function(t,e,n,r){this._assert(!i(t,e),{message:a(n,"should be equivalent"),operator:"notDeepLooseEqual",actual:t,expected:e,extra:r})},E.prototype.throws=function(t,e,n,r){"string"==typeof e&&(n=e,e=void 0);var o=void 0;try{t()}catch(t){if(o={error:t},!(null==t||g(t,"message")&&l(t,"message"))){var i=t.message;delete t.message,t.message=i}}var s=o;f(e)&&(s=e.test(o&&o.error),e=String(e)),"function"==typeof e&&o&&(s=o.error instanceof e),this._assert("function"==typeof t&&s,{message:a(n,"should throw"),operator:"throws",actual:o&&o.error,expected:e,error:!s&&o&&o.error,extra:r})},E.prototype.doesNotThrow=function(t,e,n,r){"string"==typeof e&&(n=e,e=void 0);var o=void 0;try{t()}catch(t){o={error:t}}this._assert(!o,{message:a(n,"should not throw"),operator:"throws",actual:o&&o.error,expected:e,error:o&&o.error,extra:r})},E.prototype.match=function(t,e,n,r){if(!f(e))throw new TypeError('The "regexp" argument must be an instance of RegExp. Received type '+typeof e+" ("+y(e)+")");if("string"!=typeof t)throw new TypeError('The "string" argument must be of type string. Received type '+typeof t+" ("+y(t)+")");var o=v(e,t),i=a(n,"The input "+(o?"matched":"did not match")+" the regular expression "+y(e)+". Input: "+y(t));this._assert(o,{message:i,operator:"match",actual:t,expected:e,extra:r})},E.prototype.doesNotMatch=function(t,e,n,r){if(!f(e))throw new TypeError('The "regexp" argument must be an instance of RegExp. Received type '+typeof e+" ("+y(e)+")");if("string"!=typeof t)throw new TypeError('The "string" argument must be of type string. Received type '+typeof t+" ("+y(t)+")");var o=v(e,t),i=a(n,"The input "+(o?"was expected to not match":"did not match")+" the regular expression "+y(e)+". Input: "+y(t));this._assert(!o,{message:i,operator:"doesNotMatch",actual:t,expected:e,extra:r})},E.skip=function(t,e,n){var r=x.apply(null,arguments);return r.opts.skip=!0,E(r.name,r.opts,r.cb)}}).call(this,n(16).setImmediate,n(3),"/")},function(t,e,n){var r=n(32),o=n(67),i=n(68),a=n(36),s=n(73),u=n(75),c=Date.prototype.getTime;function l(t){return null==t}function f(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||0<t.length&&"number"!=typeof t[0])}t.exports=function t(e,n,p){var d=p||{};return!(d.strict?!i(e,n):e!==n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?d.strict?i(e,n):e==n:function(e,n,i){var p,d;if(typeof e!=typeof n)return!1;if(l(e)||l(n))return!1;if(e.prototype!==n.prototype)return!1;if(o(e)!==o(n))return!1;var h=a(e),y=a(n);if(h!==y)return!1;if(h||y)return e.source===n.source&&s(e)===s(n);if(u(e)&&u(n))return c.call(e)===c.call(n);var g=f(e),m=f(n);if(g!==m)return!1;if(g||m){if(e.length!==n.length)return!1;for(p=0;p<e.length;p++)if(e[p]!==n[p])return!1;return!0}if(typeof e!=typeof n)return!1;try{var v=r(e),b=r(n)}catch(e){return!1}if(v.length!==b.length)return!1;for(v.sort(),b.sort(),p=v.length-1;0<=p;p--)if(v[p]!=b[p])return!1;for(p=v.length-1;0<=p;p--)if(!t(e[d=v[p]],n[d],i))return!1;return!0}(e,n,d))}},function(t,e,n){"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=n(33),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),r=a(t),s=e&&"[object String]"===i.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=c&&n;if(s&&0<t.length&&!o.call(t,0))for(var y=0;y<t.length;++y)p.push(String(y));if(r&&0<t.length)for(var g=0;g<t.length;++g)p.push(String(g));else for(var m in t)h&&"prototype"===m||!o.call(t,m)||p.push(String(m));if(u)for(var v=function(t){if("undefined"==typeof window||!d)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)v&&"constructor"===l[b]||!o.call(t,l[b])||p.push(l[b]);return p}}t.exports=r},function(t,e,n){"use strict";function r(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===a.call(t)}function o(t){return!!r(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Array]"!==a.call(t)&&"[object Function]"===a.call(t.callee)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,a=Object.prototype.toString,s=function(){return r(arguments)}();r.isLegacyArguments=o,t.exports=s?r:o},function(t,e,n){"use strict";var r=n(8),o=n(17),i=n(34),a=n(35),s=n(72),u=o(a(),Object);r(u,{getPolyfill:a,implementation:i,shim:s}),t.exports=u},function(t,e,n){"use strict";var r=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,i=r.call(arguments,1),a=Math.max(0,e.length-i.length),s=[],u=0;u<a;u++)s.push("$"+u);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var o=e.apply(this,i.concat(r.call(arguments)));return Object(o)===o?o:this}return e.apply(t,i.concat(r.call(arguments)))})),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n}},function(t,e,n){"use strict";(function(e){var r=e.Symbol,o=n(71);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&o()}}).call(this,n(6))},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=n(35),o=n(8);t.exports=function(){var t=r();return o(Object,{is:t},{is:function(){return Object.is!==t}}),t}},function(t,e,n){"use strict";var r=n(8),o=n(17),i=n(37),a=n(38),s=n(74),u=o(i);r(u,{getPolyfill:a,implementation:i,shim:s}),t.exports=u},function(t,e,n){"use strict";var r=n(8).supportsDescriptors,o=n(38),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,u=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!r||!u)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=u(c),n=i(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},function(t,e,n){"use strict";var r=Date.prototype.getDay,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;0<=r;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",o=!1,i=arguments.length-1;-1<=i&&!o;i--){var a=0<=i?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,o="/"===a.charAt(0))}return(o?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!o).join("/"))||"."},e.normalize=function(t){var i=e.isAbsolute(t),a="/"===o(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&a&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<e?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var o=r(t.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),s=a,u=0;u<a;u++)if(o[u]!==i[u]){s=u;break}var c=[];for(u=s;u<o.length;u++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,o=!0,i=t.length-1;1<=i;--i)if(47===(e=t.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,o=!0;for(e=t.length-1;0<=e;--e)if(47===t.charCodeAt(e)){if(!o){n=e+1;break}}else-1===r&&(o=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,o=!0,i=0,a=t.length-1;0<=a;--a){var s=t.charCodeAt(a);if(47===s){if(o)continue;n=a+1;break}-1===r&&(o=!1,r=a+1),46===s?-1===e?e=a:1!==i&&(i=1):-1!==e&&(i=-1)}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(3))},function(t,e,n){"use strict";var r=n(17),o=n(8),i=n(39),a=n(40),s=n(81),u=r(a());o(u,{getPolyfill:a,implementation:i,shim:s}),t.exports=u},function(t,e,n){"use strict";var r=n(18)("%TypeError%");t.exports=function(t,e){if(null==t)throw new r(e||"Cannot call method on "+t);return t}},function(t,e,n){"use strict";var r=n(18),o=r("%String%"),i=r("%TypeError%");t.exports=function(t){if("symbol"==typeof t)throw new i("Cannot convert a Symbol value to a string");return o(t)}},function(t,e,n){"use strict";var r=n(18),o=n(17),i=o(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&i(t,".prototype.")?o(n):n}},function(t,e,n){"use strict";var r=n(8),o=n(40);t.exports=function(){var t=o();return r(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},function(t,e,n){"use strict";var r=n(83),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var a;3<=arguments.length&&(a=n),("[object Array]"===o.call(t)?function(t,e,n){for(var r=0,o=t.length;r<o;r++)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}:"string"==typeof t?function(t,e,n){for(var r=0,o=t.length;r<o;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}:function(t,e,n){for(var r in t)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))})(t,e,a)}},function(t,e,n){"use strict";function r(t){try{var e=o.call(t);return i.test(e)}catch(t){return}}var o=Function.prototype.toString,i=/^\s*class\b/,a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(s)return function(t){try{return!r(t)&&(o.call(t),!0)}catch(t){return!1}}(t);if(r(t))return!1;var e=a.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e){},function(t,e,n){(function(e,r){var o=n(20),i=n(11).EventEmitter,a=n(5),s=n(14),u=n(86),c=n(41),l=n(13),f=n(25),p=l.call(Function.call,RegExp.prototype.test),d=/\:|\-|\?/,h=void 0!==e?e:r.nextTick;function y(t){return String(t).replace(/\s+/g," ")}function g(){if(!(this instanceof g))return new g;this.count=0,this.fail=0,this.pass=0,this.todo=0,this._stream=s(),this.tests=[],this._only=null,this._isRunning=!1}function m(t){if(!t._only)return t.tests.shift();do{var e=t.tests.shift();if(e&&t._only===e)return e}while(0!==t.tests.length)}function v(t){return p(d,t)}a(t.exports=g,i),g.prototype.createStream=function(t){var e,n=this,r=0;return(t=t||{}).objectMode?(e=s(),n.on("_push",(function t(n,o){o=o||{};var i=r++;n.once("prerun",(function(){var t={type:"test",name:n.name,id:i,skip:n._skip,todo:n._todo};f(o,"parent")&&(t.parent=o.parent),e.queue(t)})),n.on("test",(function(e){t(e,{parent:i})})),n.on("result",(function(t){t.test=i,t.type="assert",e.queue(t)})),n.on("end",(function(){e.queue({type:"end",test:i})}))})),n.on("done",(function(){e.queue(null)}))):((e=u()).queue("TAP version 13\n"),n._stream.pipe(e)),this._isRunning||(this._isRunning=!0,h((function t(){for(var e;e=m(n);)if(e.run(),!e.ended)return e.once("end",(function(){h(t)}));n.emit("done")}))),e},g.prototype.push=function(t){this.tests.push(t),this._watch(t),this.emit("_push",t)},g.prototype.only=function(t){this._only=t},g.prototype._watch=function(t){function e(t){n._stream.queue(t)}var n=this;t.once("prerun",(function(){var n="";t._skip?n="SKIP ":t._todo&&(n="TODO "),e("# "+n+y(t.name)+"\n")})),t.on("result",(function(t){"string"!=typeof t?(e(function(t,e){var n="";if(n+=(t.ok?"ok ":"not ok ")+e,n+=t.name?" "+y(t.name):"",t.skip?n+=" # SKIP"+("string"==typeof t.skip?" "+y(t.skip):""):t.todo&&(n+=" # TODO"+("string"==typeof t.todo?" "+y(t.todo):"")),n+="\n",t.ok)return n;if(n+="  ---\n",n+="    operator: "+t.operator+"\n",f(t,"expected")||f(t,"actual")){var r=c(t.expected,{depth:t.objectPrintDepth}),i=c(t.actual,{depth:t.objectPrintDepth});65<Math.max(r.length,i.length)||v(r)||v(i)?(n+="    expected: |-\n      "+r+"\n",n+="    actual: |-\n      "+i+"\n"):(n+="    expected: "+r+"\n",n+="    actual:   "+i+"\n")}t.at&&(n+="    at: "+t.at+"\n");var a=!t.actual||"object"!=typeof t.actual&&"function"!=typeof t.actual?void 0:t.actual.stack,s=t.error&&t.error.stack,u=o(a,s);if(u){var l=String(u).split("\n");n+="    stack: |-\n";for(var p=0;p<l.length;p++)n+="      "+l[p]+"\n"}return n+"  ...\n"}(t,n.count+1)),n.count++,t.ok||t.todo?n.pass++:(n.fail++,n.emit("fail"))):e("# "+t+"\n")})),t.on("test",(function(t){n._watch(t)}))},g.prototype.close=function(){var t=this;function e(e){t._stream.queue(e)}t.closed&&t._stream.emit("error",new Error("ALREADY CLOSED")),t.closed=!0,e("\n1.."+t.count+"\n"),e("# tests "+t.count+"\n"),e("# pass  "+(t.pass+t.todo)+"\n"),t.todo&&e("# todo  "+t.todo+"\n"),t.fail?e("# fail  "+t.fail+"\n"):e("\n# ok\n"),t._stream.queue(null)}}).call(this,n(16).setImmediate,n(3))},function(t,e,n){(function(e,r){var o=n(14),i=void 0!==e?e:r.nextTick;t.exports=function(t,e){var n=o(t,e);n.pause();var r=n.resume,a=n.pause,s=!1;return n.pause=function(){return s=!0,a.apply(this,arguments)},n.resume=function(){return s=!1,r.apply(this,arguments)},i((function(){s||n.resume()})),n}}).call(this,n(16).setImmediate,n(3))}],t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=46);function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e,n}));
//# sourceMappingURL=xdsmjs-test.js.map